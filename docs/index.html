<style>:root {
	--has-display-flex: initial;
	--parent-has-display-flex: initial;
}

	.flexGapNotSupported body > * {
	/* -fgp */
}

	.flexGapNotSupported body {
	/* -fgp */
}

	body {
	padding: 3em;
	font-family: sans-serif;
	}

	.flexGapNotSupported .page > * {
	/* -fgp */
}

	.flexGapNotSupported .page {
	/* -fgp */
}

	.page {
	max-width: 50em;
	margin-left: auto;
	margin-right: auto;
	}

	.flexGapNotSupported .outline > * {
	/* -fgp */
}

	.flexGapNotSupported .outline {
	/* -fgp */
}

	.outline {
	display: flow-root;
	position: relative;
	margin-bottom: 4em
	}

	.flexGapNotSupported .outline::after > * {
	/* -fgp */
}

	.flexGapNotSupported .outline::after {
	/* -fgp */
}

	.outline::after {
	content: '';
	display: block;
	position: absolute;
	top: -1px;
	bottom: -1px;
	left: -1px;
	right: -1px;
	border: 1px dotted black;
	pointer-events: none;
		}

	.flexGapNotSupported .container > * {
	/* -fgp */
}

	.flexGapNotSupported .container {
	/* -fgp */
}

	.container {
	padding: 0 !important;
	background: transparent !important;
	font-size: 13px
	}

	.flexGapNotSupported .container > * > * {
	/* -fgp */
}

	.flexGapNotSupported .container > * {
	/* -fgp */
}

	.container > * {
	box-sizing: border-box;
	background: pink;
	border-radius: 5px;
	padding: 1em;
	font-weight: bold;
			}

	.flexGapNotSupported .container > .container > * > * {
	/* -fgp */
}

	.flexGapNotSupported .container > .container > * {
	/* -fgp */
}

	.container > .container > * {
	background: aqua;
			}

	.flexGapNotSupported .container > .container > .container > * > * {
	/* -fgp */
}

	.flexGapNotSupported .container > .container > .container > * {
	/* -fgp */
}

	.container > .container > .container > * {
	background: lightgrey;
			}

	.flexGapNotSupported .container > .container > .container > .container > * > * {
	/* -fgp */
}

	.flexGapNotSupported .container > .container > .container > .container > * {
	/* -fgp */
}

	.container > .container > .container > .container > * {
	background: yellow;
			}

	.flexGapNotSupported .flex-wrap > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .flex-wrap {
	/* -fgp */
}

	.flexGapNotSupported .flex-wrap > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
}

	.flex-wrap {
	display: flex;
	--has-display-flex: ;
	flex-wrap: wrap;
	}

	.flexGapNotSupported .gap-20px > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .gap-20px {
	/* -fgp */
	--fgp-gap-row: var(--gap);
	--fgp-margin-top: calc(var(--fgp-parent-gap-row, 0px) - var(--fgp-gap-row) + var(--orig-margin-top, 0px)) !important;
	--fgp-gap-column: var(--gap);
	--fgp-margin-left: calc(var(--fgp-parent-gap-column, 0px) - var(--fgp-gap-column) + var(--orig-margin-left, 0px)) !important;
}

	.flexGapNotSupported .gap-20px > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
	--fgp-parent-gap-row: var(--gap);
	--fgp-margin-top: var(--fgp-gap-row);
	margin-top: var(--parent-has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	--fgp-parent-gap-column: var(--gap);
	--fgp-margin-left: var(--fgp-gap-column);
	margin-left: var(--parent-has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
}

	.gap-20px {
	display: flex;
	--has-display-flex: ;
	--gap: 20px;
	gap: var(--has-display-flex, var(--gap)) 0;
	margin-top: var(--has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	margin-left: var(--has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));

	}

	.flexGapNotSupported .gap-40px > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .gap-40px {
	/* -fgp */
	--fgp-gap-row: 40px;
	--fgp-margin-top: calc(var(--fgp-parent-gap-row, 0px) - var(--fgp-gap-row) + var(--orig-margin-top, 0px)) !important;
	--fgp-gap-column: 40px;
	--fgp-margin-left: calc(var(--fgp-parent-gap-column, 0px) - var(--fgp-gap-column) + var(--orig-margin-left, 0px)) !important;
}

	.flexGapNotSupported .gap-40px > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
	--fgp-parent-gap-row: 40px;
	--fgp-margin-top: var(--fgp-gap-row);
	margin-top: var(--parent-has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	--fgp-parent-gap-column: 40px;
	--fgp-margin-left: var(--fgp-gap-column);
	margin-left: var(--parent-has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
}

	.gap-40px {
	display: flex;
	--has-display-flex: ;
	gap: var(--has-display-flex, 40px) 0;
	margin-top: var(--has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	margin-left: var(--has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
	}

	.flexGapNotSupported .flex.gap-40px-no-flex > *, .flexGapNotSupported .inline-flex.gap-40px-no-flex > * {
	/* -fgp */
	--fgp-parent-gap-row: 40px;
	--fgp-margin-top: var(--fgp-gap-row);
	margin-top: var(--parent-has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	--fgp-parent-gap-column: 40px;
	--fgp-margin-left: var(--fgp-gap-column);
	margin-left: var(--parent-has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
}

	.flexGapNotSupported .flex.gap-40px-no-flex, .flexGapNotSupported .inline-flex.gap-40px-no-flex {
	/* -fgp */
	--fgp-gap-row: 40px;
	--fgp-margin-top: calc(var(--fgp-parent-gap-row, 0px) - var(--fgp-gap-row) + var(--orig-margin-top, 0px)) !important;
	--fgp-gap-column: 40px;
	--fgp-margin-left: calc(var(--fgp-parent-gap-column, 0px) - var(--fgp-gap-column) + var(--orig-margin-left, 0px)) !important;
}

	.gap-40px-no-flex {
	gap: var(--has-display-flex, 40px) 0;
	margin-top: var(--has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	margin-left: var(--has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
	}

	.flexGapNotSupported .row-gap-40px > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .row-gap-40px {
	/* -fgp */
	--fgp-gap-row: 40px;
	--fgp-margin-top: calc(var(--fgp-parent-gap-row, 0px) - var(--fgp-gap-row) + var(--orig-margin-top, 0px)) !important;
}

	.flexGapNotSupported .row-gap-40px > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
	--fgp-parent-gap-row: 40px;
	--fgp-margin-top: var(--fgp-gap-row);
	margin-top: var(--parent-has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
}

	.row-gap-40px {
	display: flex;
	--has-display-flex: ;
	row-gap: var(--has-display-flex, 40px) 0;
	margin-top: var(--has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	}

	.flexGapNotSupported .column-gap-20px > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .column-gap-20px {
	/* -fgp */
	--fgp-gap-column: 20px;
	--fgp-margin-left: calc(var(--fgp-parent-gap-column, 0px) - var(--fgp-gap-column) + var(--orig-margin-left, 0px)) !important;
}

	.flexGapNotSupported .column-gap-20px > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
	--fgp-parent-gap-column: 20px;
	--fgp-margin-left: var(--fgp-gap-column);
	margin-left: var(--parent-has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
}

	.column-gap-20px {
	display: flex;
	--has-display-flex: ;
	-moz-column-gap: 20px;
	column-gap: var(--has-display-flex, 20px) 0;
	margin-left: var(--has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
	}

	.flexGapNotSupported .gap-3\% > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .gap-3\% {
	/* -fgp */
	--fgp-gap-row: 10%;
	--fgp-margin-top: calc(var(--fgp-parent-gap-row, 0px) - var(--fgp-gap-row) + var(--orig-margin-top, 0px)) !important;
	--fgp-gap-column: 10%;
	--fgp-margin-left: calc(var(--fgp-parent-gap-column, 0px) - var(--fgp-gap-column) + var(--orig-margin-left, 0px)) !important;
}

	.flexGapNotSupported .gap-3\% > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
	--fgp-parent-gap-row: 10%;
	--fgp-margin-top: var(--fgp-gap-row);
	margin-top: var(--parent-has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	--fgp-parent-gap-column: 10%;
	--fgp-margin-left: var(--fgp-gap-column);
	margin-left: var(--parent-has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
}

	.gap-3\% {
	display: flex;
	--has-display-flex: ;
	gap: var(--has-display-flex, 10%) 0;
	margin-top: var(--has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	margin-left: var(--has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
	}

	.flexGapNotSupported .gap-6\% > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .gap-6\% {
	/* -fgp */
	--fgp-gap-row: 16%;
	--fgp-margin-top: calc(var(--fgp-parent-gap-row, 0px) - var(--fgp-gap-row) + var(--orig-margin-top, 0px)) !important;
	--fgp-gap-column: 16%;
	--fgp-margin-left: calc(var(--fgp-parent-gap-column, 0px) - var(--fgp-gap-column) + var(--orig-margin-left, 0px)) !important;
}

	.flexGapNotSupported .gap-6\% > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
	--fgp-parent-gap-row: 16%;
	--fgp-margin-top: var(--fgp-gap-row);
	margin-top: var(--parent-has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	--fgp-parent-gap-column: 16%;
	--fgp-margin-left: var(--fgp-gap-column);
	margin-left: var(--parent-has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
}

	.gap-6\% {
	display: flex;
	--has-display-flex: ;
	gap: var(--has-display-flex, 16%) 0;
	margin-top: var(--has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	margin-left: var(--has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
	}

	.flexGapNotSupported .gap-2em > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .gap-2em {
	/* -fgp */
	--fgp-gap-row: 2em;
	--fgp-margin-top: calc(var(--fgp-parent-gap-row, 0px) - var(--fgp-gap-row) + var(--orig-margin-top, 0px)) !important;
	--fgp-gap-column: 2em;
	--fgp-margin-left: calc(var(--fgp-parent-gap-column, 0px) - var(--fgp-gap-column) + var(--orig-margin-left, 0px)) !important;
}

	.flexGapNotSupported .gap-2em > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
	--fgp-parent-gap-row: 2em;
	--fgp-margin-top: var(--fgp-gap-row);
	margin-top: var(--parent-has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	--fgp-parent-gap-column: 2em;
	--fgp-margin-left: var(--fgp-gap-column);
	margin-left: var(--parent-has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
}

	.gap-2em {
	display: flex;
	--has-display-flex: ;
	gap: var(--has-display-flex, 2em) 0;
	margin-top: var(--has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	margin-left: var(--has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
	}

	.flexGapNotSupported .gap-20px.margin-20px > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .gap-20px.margin-20px {
	/* -fgp */
	--fgp-gap-row: 20px;
	--fgp-margin-top: calc(var(--fgp-parent-gap-row, 0px) - var(--fgp-gap-row) + var(--orig-margin-top, 0px)) !important;
	--fgp-gap-column: 20px;
	--fgp-margin-left: calc(var(--fgp-parent-gap-column, 0px) - var(--fgp-gap-column) + var(--orig-margin-left, 0px)) !important;
}

	.flexGapNotSupported .gap-20px.margin-20px > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
	--fgp-parent-gap-row: 20px;
	--fgp-margin-top: var(--fgp-gap-row);
	margin-top: var(--parent-has-display-flex) calc(var(--orig-margin-top, 0px) + var(--fgp-margin-top));
	--fgp-parent-gap-column: 20px;
	--fgp-margin-left: var(--fgp-gap-column);
	margin-left: var(--parent-has-display-flex) calc(var(--orig-margin-left, 0px) + var(--fgp-margin-left));
}

	.gap-20px.margin-20px {
	display: flex;
	--has-display-flex: ;
	gap: var(--has-display-flex, 20px) 0;
	margin: 20px;
	}

	.flexGapNotSupported .space-evenly > * {
	/* -fgp */
}

	.flexGapNotSupported .space-evenly {
	/* -fgp */
}

	.space-evenly {
	justify-content: space-evenly;
	}

	.flexGapNotSupported .justify-flex-end > * {
	/* -fgp */
}

	.flexGapNotSupported .justify-flex-end {
	/* -fgp */
}

	.justify-flex-end {
	justify-content: flex-end;
	}

	.flexGapNotSupported .grow > * {
	/* -fgp */
}

	.flexGapNotSupported .grow {
	/* -fgp */
}

	.grow {
	flex-grow: 1;
	}

	.flexGapNotSupported .item-50\% > * {
	/* -fgp */
}

	.flexGapNotSupported .item-50\% {
	/* -fgp */
}

	.item-50\% {
	width: calc(50% - var(--gap));
	}

	.flexGapNotSupported .grid > * {
	/* -fgp */
}

	.flexGapNotSupported .grid {
	/* -fgp */
}

	.grid {
	display: grid;
	}

	.flexGapNotSupported .flex > * > * {
	/* -fgp */--parent-has-display-flex: initial;
}

	.flexGapNotSupported .flex {
	/* -fgp */
}

	.flexGapNotSupported .flex > * {
	/* -fgp */
	--has-display-flex: initial;
	--parent-has-display-flex: !important;
}

	.flex {
	display: flex;
	--has-display-flex: ;
	}

	.no-flex {
		--has-display-flex: initial;
	}
	.flexGapNotSupported .no-flex > * > * {
	/* -fgp */
}
	.flexGapNotSupported .no-flex > * {
	/* -fgp */
}
	.no-flex > * {
	--parent-has-display-flex: initial !important;
	}

	.flexGapNotSupported .w > * {
	/* -fgp */
}

	.flexGapNotSupported .w {
	/* -fgp */
}

	.w {
	width: auto;
	}
</style>

<div class="page flexGapNotSupported">

	<h1>Flex Gap Polyfill</h1>

	<p>Below are a list of test cases demonstrating scenarios this polyfill works with.</p>
	<p>View on <a href="https://github.com/limitlessloop/flex-gap-polyfill">github</a>.</p>

	<h4>Basic</h4>
	<pre>
.container {
	display: flex;
	flex-wrap: wrap;
	gap: 20px;
}
	</pre>

	<div class="outline">
		<div class="container gap-20px flex-wrap">
			<div>One</div>
			<div>Two</div>
			<div>Three</div>
			<div>Four</div>
			<div>Five</div>
		</div>
	</div>

	<h3>Nested</h3>

	<pre>
.container {
	display: flex;
	flex-wrap: wrap;
	gap: 20px;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	gap: 40px;
}
	</pre>

	<div class="outline">
		<div class="container gap-40px flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container gap-20px flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

	<h3>Percentages</h3>

	<p>(Percentage row gaps only appear when height is specified, disabled in polyfill for now).</p>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 6%;
}
	</pre>

	<div class="outline">
		<div class="container gap-6% flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

		<h3>Ems</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 2em;
}
	</pre>

	<div class="outline">
		<div class="container gap-2em flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

	<h3>Nested Combination (% > px, px > %, em > px, etc)</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 6%;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	gap: 20px;
}
	</pre>

	<div class="outline">
		<div class="container gap-6% flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container gap-20px flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 6%;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	gap: 3%;
}
	</pre>

	<div class="outline">
		<div class="container gap-6% flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container gap-3% flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

		<pre>
.container
	display: flex;
	flex-wrap: wrap;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	gap: 3%;
}
	</pre>

	<div class="outline">
		<div class="container flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container gap-6% flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

	<h3>Margin + Gap</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	margin: 20px;
	gap: 3%;
}
	</pre>

	<div class="outline">
		<div class="container gap-20px margin-20px flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

	<h3>Justify End</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	justify-content: flex-end;
	gap: 3%;
}
	</pre>

	<div class="outline">
		<div class="container gap-40px flex-wrap space-evenly justify-flex-end">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

	<h3>Space Evenly</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 3%;
	justify-content: space-evenly;
}
	</pre>

	<div class="outline">
		<div class="container gap-40px flex-wrap space-evenly">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

	<h3>Grid</h3>

	<pre>
.container {
	display: flex;
	flex-wrap: wrap;
	flex-grow: 1;
	--gap: 20px;
	gap: var(--gap);
}

.item-50% {
	width: calc(50% - var(--gap))
}
	</pre>

	<div class="outline">
		<div class="container gap-20px flex-wrap grow">
			<div class="item-50%">A</div>
			<div class="item-50%">B</div>
			<div class="item-50%">C</div>
			<div class="item-50%">D</div>
		</div>
	</div>

	<h3>Columns and Rows Independently</h3>

	<pre>
.container {
	display: flex;
	flex-wrap: wrap;
	row-gap: 40px;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	column-gap: 20px;
}
	</pre>

	<div class="outline">
		<div class="container row-gap-40px flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container column-gap-20px flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

	<h3>When container doesn't have flex</h3>

	<pre>
.container {
	display: grid;
	gap: 40px;
}
	</pre>

	<div class="outline">
		<div class="container grid gap-40px-no-flex">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

</div>

