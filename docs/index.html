<style>:root {
	--fgp-has-polyfill-gap-container: 0px;
	--fgp-has-polyfill-gap-item: 0px;
}

	body {
		padding: 3em;
		font-family: sans-serif;
	}

	.page {
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	.outline {
		display: flow-root;
		position: relative;
		margin-bottom: 4em
	}

	.outline::after {
			content: '';
			display: block;
			position: absolute;
			top: -1px;
			bottom: -1px;
			left: -1px;
			right: -1px;
			border: 1px dotted black;
			pointer-events: none;
		}

	.container {
		padding: 0 !important;
		background: transparent !important;
		font-size: 13px
	}

	.container > * {
				box-sizing: border-box;
				background: pink;
				border-radius: 5px;
				padding: 1em;
				font-weight: bold;
			}

	.container > .container > * {
				background: aqua;
			}

	.container > .container > .container > * {
				background: lightgrey;
			}

	.container > .container > .container > .container > * {
				background: yellow;
			}

	.flex-wrap {
		flex-wrap: wrap;
	}

	.gap-20px {
		display: flex;
		--gap: 20px;
		gap: var(--gap);

	}

	.flexGapNotSupported .gap-20px > * > * {
	--fgp-gap-item-row: initial;
	--fgp-gap-item-column: initial;
}

	.flexGapNotSupported .gap-20px > * {
	--fgp-has-polyfill-gap-item: initial;
	--fgp-gap-container-row: initial;
	--fgp-gap-item-row: var(--fgp-has-polyfill-gap-item, var(--gap)) !important;
	--fgp-gap-row: var(--fgp-gap-item-row);
	--fgp-gap-parent-row: var(--fgp-has-polyfill-gap-item, var(--gap)) !important;
	margin-top: var(--fgp-gap-row);
	--fgp-gap-container-column: initial;
	--fgp-gap-item-column: var(--fgp-has-polyfill-gap-item, var(--gap)) !important;
	--fgp-gap-column: var(--fgp-gap-item-column);
	--fgp-gap-parent-column: var(--fgp-has-polyfill-gap-item, var(--gap)) !important;
	margin-left: var(--fgp-gap-column);
	pointer-events: all;
}

	.flexGapNotSupported .gap-20px {
	--fgp-has-polyfill-gap-container: initial;
	gap: 0;
	--fgp-gap-container-row: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-row, 0px) - var(--gap))) !important;
	--fgp-gap-parent-row: initial;
	--fgp-gap-item-row: initial;
	--fgp-gap-row: var(--fgp-gap-container-row) !important;
	--fgp-margin-top: calc(var(--fgp-gap-row) + 0px) !important;
	margin-top: var(--fgp-margin-top);
	--fgp-gap-container-column: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-column, 0px) - var(--gap))) !important;
	--fgp-gap-parent-column: initial;
	--fgp-gap-item-column: initial;
	--fgp-gap-column: var(--fgp-gap-container-column) !important;
	--fgp-margin-left: calc(var(--fgp-gap-column) + 0px) !important;
	margin-left: var(--fgp-margin-left);
	pointer-events: none;
	padding-top: 0.02px;
}

	.gap-40px {
		display: flex;
		gap: 40px;
	}

	.flexGapNotSupported .gap-40px > * > * {
	--fgp-gap-item-row: initial;
	--fgp-gap-item-column: initial;
}

	.flexGapNotSupported .gap-40px > * {
	--fgp-has-polyfill-gap-item: initial;
	--fgp-gap-container-row: initial;
	--fgp-gap-item-row: var(--fgp-has-polyfill-gap-item, 40px) !important;
	--fgp-gap-row: var(--fgp-gap-item-row);
	--fgp-gap-parent-row: var(--fgp-has-polyfill-gap-item, 40px) !important;
	margin-top: var(--fgp-gap-row);
	--fgp-gap-container-column: initial;
	--fgp-gap-item-column: var(--fgp-has-polyfill-gap-item, 40px) !important;
	--fgp-gap-column: var(--fgp-gap-item-column);
	--fgp-gap-parent-column: var(--fgp-has-polyfill-gap-item, 40px) !important;
	margin-left: var(--fgp-gap-column);
	pointer-events: all;
}

	.flexGapNotSupported .gap-40px {
	--fgp-has-polyfill-gap-container: initial;
	gap: 0;
	--fgp-gap-container-row: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-row, 0px) - 40px)) !important;
	--fgp-gap-parent-row: initial;
	--fgp-gap-item-row: initial;
	--fgp-gap-row: var(--fgp-gap-container-row) !important;
	--fgp-margin-top: calc(var(--fgp-gap-row) + 0px) !important;
	margin-top: var(--fgp-margin-top);
	--fgp-gap-container-column: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-column, 0px) - 40px)) !important;
	--fgp-gap-parent-column: initial;
	--fgp-gap-item-column: initial;
	--fgp-gap-column: var(--fgp-gap-container-column) !important;
	--fgp-margin-left: calc(var(--fgp-gap-column) + 0px) !important;
	margin-left: var(--fgp-margin-left);
	pointer-events: none;
	padding-top: 0.02px;
}

	.row-gap-40px {
		display: flex;
		row-gap: 40px;
	}

	.flexGapNotSupported .row-gap-40px > * > * {
	--fgp-gap-item-row: initial;
	--fgp-gap-item-column: initial;
}

	.flexGapNotSupported .row-gap-40px > * {
	--fgp-has-polyfill-gap-item: initial;
	--fgp-gap-container-row: initial;
	--fgp-gap-item-row: var(--fgp-has-polyfill-gap-item, 40px) !important;
	--fgp-gap-row: var(--fgp-gap-item-row);
	--fgp-gap-parent-row: var(--fgp-has-polyfill-gap-item, 40px) !important;
	margin-top: var(--fgp-gap-row);
	--fgp-gap-container-column: initial;
	--fgp-gap-item-column: var(--fgp-has-polyfill-gap-item, 0px) !important;
	--fgp-gap-column: var(--fgp-gap-item-column);
	--fgp-gap-parent-column: var(--fgp-has-polyfill-gap-item, 0px) !important;
	margin-left: var(--fgp-gap-column);
	pointer-events: all;
}

	.flexGapNotSupported .row-gap-40px {
	--fgp-has-polyfill-gap-container: initial;
	gap: 0;
	--fgp-gap-container-row: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-row, 0px) - 40px)) !important;
	--fgp-gap-parent-row: initial;
	--fgp-gap-item-row: initial;
	--fgp-gap-row: var(--fgp-gap-container-row) !important;
	--fgp-margin-top: calc(var(--fgp-gap-row) + 0px) !important;
	margin-top: var(--fgp-margin-top);
	--fgp-gap-container-column: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-column, 0px) - 0px)) !important;
	--fgp-gap-parent-column: initial;
	--fgp-gap-item-column: initial;
	--fgp-gap-column: var(--fgp-gap-container-column) !important;
	--fgp-margin-left: calc(var(--fgp-gap-column) + 0px) !important;
	margin-left: var(--fgp-margin-left);
	pointer-events: none;
	padding-top: 0.02px;
}

	.column-gap-20px {
		display: flex;
		-moz-column-gap: 20px;
		     column-gap: 20px;
	}

	.flexGapNotSupported .column-gap-20px > * > * {
	--fgp-gap-item-row: initial;
	--fgp-gap-item-column: initial;
}

	.flexGapNotSupported .column-gap-20px > * {
	--fgp-has-polyfill-gap-item: initial;
	--fgp-gap-container-row: initial;
	--fgp-gap-item-row: var(--fgp-has-polyfill-gap-item, 0px) !important;
	--fgp-gap-row: var(--fgp-gap-item-row);
	--fgp-gap-parent-row: var(--fgp-has-polyfill-gap-item, 0px) !important;
	margin-top: var(--fgp-gap-row);
	--fgp-gap-container-column: initial;
	--fgp-gap-item-column: var(--fgp-has-polyfill-gap-item, 20px) !important;
	--fgp-gap-column: var(--fgp-gap-item-column);
	--fgp-gap-parent-column: var(--fgp-has-polyfill-gap-item, 20px) !important;
	margin-left: var(--fgp-gap-column);
	pointer-events: all;
}

	.flexGapNotSupported .column-gap-20px {
	--fgp-has-polyfill-gap-container: initial;
	gap: 0;
	--fgp-gap-container-row: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-row, 0px) - 0px)) !important;
	--fgp-gap-parent-row: initial;
	--fgp-gap-item-row: initial;
	--fgp-gap-row: var(--fgp-gap-container-row) !important;
	--fgp-margin-top: calc(var(--fgp-gap-row) + 0px) !important;
	margin-top: var(--fgp-margin-top);
	--fgp-gap-container-column: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-column, 0px) - 20px)) !important;
	--fgp-gap-parent-column: initial;
	--fgp-gap-item-column: initial;
	--fgp-gap-column: var(--fgp-gap-container-column) !important;
	--fgp-margin-left: calc(var(--fgp-gap-column) + 0px) !important;
	margin-left: var(--fgp-margin-left);
	pointer-events: none;
	padding-top: 0.02px;
}

	.gap-3\% {
		display: flex;
		gap: 3%;
	}

	.flexGapNotSupported .gap-3\% > * > * {
	--fgp-gap-item-row: initial;
	--fgp-gap-item-column: initial;
}

	.flexGapNotSupported .gap-3\% > * {
	--fgp-has-polyfill-gap-item: initial;
	--fgp-gap-container-row: initial;
	--fgp-gap-item-row: var(--fgp-has-polyfill-gap-item, 3%) !important;
	--fgp-gap-row: var(--fgp-gap-item-row);
	--fgp-gap-container-column: initial;
	--fgp-gap-item-column: var(--fgp-has-polyfill-gap-item, 3%) !important;
	--fgp-gap-column: var(--fgp-gap-item-column);
	--fgp-gap-parent-column: var(--fgp-has-polyfill-gap-item, 3%) !important;
	margin-left: var(--fgp-gap-column);
	pointer-events: all;
}

	.flexGapNotSupported .gap-3\% {
	--fgp-has-polyfill-gap-container: initial;
	gap: 0;
	--fgp-gap-container-row: var(--fgp-gap-item-row) !important;
	--fgp-gap-parent-row: initial;
	--fgp-gap-item-row: initial;
	--fgp-gap-row: var(--fgp-gap-container-row) !important;
	--fgp-gap-percentage-decimal-column: 0.03;
	--fgp-gap-container-column: var(--fgp-has-polyfill-gap-container, var(--fgp-gap-percentage-to-pixels-column, calc( ((var(--fgp-gap-parent-column, 0%) - 3%) * var(--fgp-width-percentages-decimal, 1)) / (100 - 3) * 100))) !important;
	--fgp-gap-parent-column: initial;
	--fgp-gap-item-column: initial;
	--fgp-gap-column: var(--fgp-gap-container-column) !important;
	--fgp-margin-left: calc(var(--fgp-gap-column) + 0px) !important;
	margin-left: var(--fgp-margin-left);
	pointer-events: none;
	padding-top: 0.02px;
}

	.gap-6\% {
		display: flex;
		gap: 6%;
	}

	.flexGapNotSupported .gap-6\% > * > * {
	--fgp-gap-item-row: initial;
	--fgp-gap-item-column: initial;
}

	.flexGapNotSupported .gap-6\% > * {
	--fgp-has-polyfill-gap-item: initial;
	--fgp-gap-container-row: initial;
	--fgp-gap-item-row: var(--fgp-has-polyfill-gap-item, 6%) !important;
	--fgp-gap-row: var(--fgp-gap-item-row);
	--fgp-gap-container-column: initial;
	--fgp-gap-item-column: var(--fgp-has-polyfill-gap-item, 6%) !important;
	--fgp-gap-column: var(--fgp-gap-item-column);
	--fgp-gap-parent-column: var(--fgp-has-polyfill-gap-item, 6%) !important;
	margin-left: var(--fgp-gap-column);
	pointer-events: all;
}

	.flexGapNotSupported .gap-6\% {
	--fgp-has-polyfill-gap-container: initial;
	gap: 0;
	--fgp-gap-container-row: var(--fgp-gap-item-row) !important;
	--fgp-gap-parent-row: initial;
	--fgp-gap-item-row: initial;
	--fgp-gap-row: var(--fgp-gap-container-row) !important;
	--fgp-gap-percentage-decimal-column: 0.06;
	--fgp-gap-container-column: var(--fgp-has-polyfill-gap-container, var(--fgp-gap-percentage-to-pixels-column, calc( ((var(--fgp-gap-parent-column, 0%) - 6%) * var(--fgp-width-percentages-decimal, 1)) / (100 - 6) * 100))) !important;
	--fgp-gap-parent-column: initial;
	--fgp-gap-item-column: initial;
	--fgp-gap-column: var(--fgp-gap-container-column) !important;
	--fgp-margin-left: calc(var(--fgp-gap-column) + 0px) !important;
	margin-left: var(--fgp-margin-left);
	pointer-events: none;
	padding-top: 0.02px;
}

	.gap-2em {
		display: flex;
		gap: 2em;
	}

	.flexGapNotSupported .gap-2em > * > * {
	--fgp-gap-item-row: initial;
	--fgp-gap-item-column: initial;
}

	.flexGapNotSupported .gap-2em > * {
	--fgp-has-polyfill-gap-item: initial;
	--fgp-gap-container-row: initial;
	--fgp-gap-item-row: var(--fgp-has-polyfill-gap-item, 2em) !important;
	--fgp-gap-row: var(--fgp-gap-item-row);
	--fgp-gap-parent-row: var(--fgp-has-polyfill-gap-item, 2em) !important;
	margin-top: var(--fgp-gap-row);
	--fgp-gap-container-column: initial;
	--fgp-gap-item-column: var(--fgp-has-polyfill-gap-item, 2em) !important;
	--fgp-gap-column: var(--fgp-gap-item-column);
	--fgp-gap-parent-column: var(--fgp-has-polyfill-gap-item, 2em) !important;
	margin-left: var(--fgp-gap-column);
	pointer-events: all;
}

	.flexGapNotSupported .gap-2em {
	--fgp-has-polyfill-gap-container: initial;
	gap: 0;
	--fgp-gap-container-row: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-row, 0px) - 2em)) !important;
	--fgp-gap-parent-row: initial;
	--fgp-gap-item-row: initial;
	--fgp-gap-row: var(--fgp-gap-container-row) !important;
	--fgp-margin-top: calc(var(--fgp-gap-row) + 0px) !important;
	margin-top: var(--fgp-margin-top);
	--fgp-gap-container-column: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-column, 0px) - 2em)) !important;
	--fgp-gap-parent-column: initial;
	--fgp-gap-item-column: initial;
	--fgp-gap-column: var(--fgp-gap-container-column) !important;
	--fgp-margin-left: calc(var(--fgp-gap-column) + 0px) !important;
	margin-left: var(--fgp-margin-left);
	pointer-events: none;
	padding-top: 0.02px;
}

	.gap-20px.margin-20px {
		display: flex;
		gap: 20px;
		margin: 20px;
	}

	.flexGapNotSupported .gap-20px.margin-20px > * > * {
	--fgp-gap-item-row: initial;
	--fgp-gap-item-column: initial;
}

	.flexGapNotSupported .gap-20px.margin-20px > * {
	--fgp-has-polyfill-gap-item: initial;
	--fgp-gap-container-row: initial;
	--fgp-gap-item-row: var(--fgp-has-polyfill-gap-item, 20px) !important;
	--fgp-gap-row: var(--fgp-gap-item-row);
	--fgp-gap-parent-row: var(--fgp-has-polyfill-gap-item, 20px) !important;
	margin-top: var(--fgp-gap-row);
	--fgp-gap-container-column: initial;
	--fgp-gap-item-column: var(--fgp-has-polyfill-gap-item, 20px) !important;
	--fgp-gap-column: var(--fgp-gap-item-column);
	--fgp-gap-parent-column: var(--fgp-has-polyfill-gap-item, 20px) !important;
	margin-left: var(--fgp-gap-column);
	pointer-events: all;
}

	.flexGapNotSupported .gap-20px.margin-20px {
	--fgp-has-polyfill-gap-container: initial;
	gap: 0;
	--fgp-gap-container-row: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-row, 0px) - 20px)) !important;
	--fgp-gap-parent-row: initial;
	--fgp-gap-item-row: initial;
	--fgp-gap-row: var(--fgp-gap-container-row) !important;
	--fgp-margin-top: calc(var(--fgp-gap-row) + 20px) !important;
	margin-top: var(--fgp-margin-top);
	--fgp-gap-container-column: var(--fgp-has-polyfill-gap-container, calc(var(--fgp-gap-parent-column, 0px) - 20px)) !important;
	--fgp-gap-parent-column: initial;
	--fgp-gap-item-column: initial;
	--fgp-gap-column: var(--fgp-gap-container-column) !important;
	--fgp-margin-left: calc(var(--fgp-gap-column) + 20px) !important;
	margin-left: var(--fgp-margin-left);
	pointer-events: none;
	padding-top: 0.02px;
}

	.space-evenly {
		justify-content: space-evenly;
	}

	.justify-flex-end {
		justify-content: flex-end;
	}

	.grow {
		flex-grow: 1;
	}

	.item-50\% {
		width: calc(50% - var(--gap));
	}

	.flexGapNotSupported .flex.item-50\% > * > *, .flexGapNotSupported .inline-flex.item-50\% > * > * {
	--fgp-gap-percentage-to-pixels-column: initial;
	--fgp-gap-percentage-to-pixels-row: initial;
}

	.flexGapNotSupported .flex.item-50\%, .flexGapNotSupported .inline-flex.item-50\% {
	--fgp-gap-percentage-to-pixels-column: calc(-1 * calc(50% - var(--gap)) * var(--fgp-gap_percentage-decimal-column)) !important;
	--fgp-gap-percentage-to-pixels-row: calc(-1 * calc(50% - var(--gap)) * var(--fgp-gap-percentage-decimal-column)) !important;
	--fgp-width: calc(calc(50% - var(--gap)) - var(--fgp-gap-container-column, 0%)) !important;
}

	.w {
		width: auto;
	}
</style>

<div class="page flexGapNotSupported">

	<h1>Flex Gap Polyfill</h1>

	<p>Below are a list of test cases demonstrating scenarios this polyfill works with.</p>
	<p>View on <a href="https://github.com/limitlessloop/flex-gap-polyfill">github</a>.</p>

	<h4>Basic</h4>
	<pre>
.container {
	display: flex;
	flex-wrap: wrap;
	gap: 20px;
}
	</pre>

	<div class="outline">
		<div class="container gap-20px flex-wrap">
			<div>One</div>
			<div>Two</div>
			<div>Three</div>
			<div>Four</div>
			<div>Five</div>
		</div>
	</div>

	<h3>Nested</h3>

	<pre>
.container {
	display: flex;
	flex-wrap: wrap;
	gap: 20px;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	gap: 40px;
}
	</pre>

	<div class="outline">
		<div class="container gap-40px flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container gap-20px flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

	<h3>Percentages</h3>

	<p>(Percentage row gaps only appear when height is specified, disabled in polyfill for now).</p>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 6%;
}
	</pre>

	<div class="outline">
		<div class="container gap-6% flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

		<h3>Ems</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 2em;
}
	</pre>

	<div class="outline">
		<div class="container gap-2em flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

	<h3>Nested Combination (% > px, px > %, em > px, etc)</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 6%;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	gap: 20px;
}
	</pre>

	<div class="outline">
		<div class="container gap-6% flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container gap-20px flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 6%;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	gap: 3%;
}
	</pre>

	<div class="outline">
		<div class="container gap-6% flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container gap-3% flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

	<h3>Margin + Gap</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	margin: 20px;
	gap: 3%;
}
	</pre>

	<div class="outline">
		<div class="container gap-20px margin-20px flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

	<h3>Justify End</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	justify-content: flex-end;
	gap: 3%;
}
	</pre>

	<div class="outline">
		<div class="container gap-40px flex-wrap space-evenly justify-flex-end">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

	<h3>Space Evenly</h3>

	<pre>
.container
	display: flex;
	flex-wrap: wrap;
	gap: 3%;
	justify-content: space-evenly;
}
	</pre>

	<div class="outline">
		<div class="container gap-40px flex-wrap space-evenly">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
		</div>
	</div>

	<h3>Grid</h3>

	<pre>
.container {
	display: flex;
	flex-wrap: wrap;
	flex-grow: 1;
	--gap: 20px;
	gap: var(--gap);
}

.item-50% {
	width: calc(50% - var(--gap))
}
	</pre>

	<div class="outline">
		<div class="container gap-20px flex-wrap grow">
			<div class="item-50%">A</div>
			<div class="item-50%">B</div>
			<div class="item-50%">C</div>
			<div class="item-50%">D</div>
		</div>
	</div>

	<h3>Columns and Rows Independently</h3>

	<pre>
.container {
	display: flex;
	flex-wrap: wrap;
	row-gap: 40px;
}

.container .container {
	display: flex;
	flex-wrap: wrap;
	column-gap: 20px;
}
	</pre>

	<div class="outline">
		<div class="container row-gap-40px flex-wrap">
			<div>A</div>
			<div>B</div>
			<div>C</div>
			<div>D</div>
			<div class="container column-gap-20px flex-wrap">
				<div>A</div>
				<div>B</div>
				<div>C</div>
				<div>D</div>
			</div>
		</div>
	</div>

</div>

