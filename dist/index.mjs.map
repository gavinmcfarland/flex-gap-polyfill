{"version":3,"file":"index.mjs","sources":["../src/index.js"],"sourcesContent":["import postcss from \"postcss\";\nconst { parse } = require('postcss-values-parser');\n\nmodule.exports = (opts = {}) => {\n\topts = opts || {}\n\n\tconst pf = \"--fgp-\";\n\tconst flexGapNotSupported = opts.flexGapNotSupported ? opts.flexGapNotSupported + \" \" : \"\";\n\n\tfunction hasFlex(decl, obj) {\n\t\tif (decl.prop === \"display\" && decl.value === \"flex\" || decl.prop === \"display\" && decl.value === \"inline-flex\") {\n\t\t\tobj.hasFlex = true;\n\t\t}\n\t}\n\n\tfunction hasWidth(decl, obj) {\n\t\tif (decl.prop === \"width\") {\n\t\t\tobj.hasWidth = true\n\t\t}\n\t\tif (decl.prop === \"height\") {\n\t\t\tobj.hasHeight = true\n\t\t}\n\t}\n\n\tfunction hasGap(decl, obj) {\n\t\tif (decl.prop === \"gap\" || decl.prop === \"column-gap\" || decl.prop === \"row-gap\") {\n\t\t\tobj.hasGap = true;\n\t\t\tif (decl.prop === \"row-gap\") {\n\t\t\t\tobj.gapValues[0] = decl.value\n\t\t\t}\n\n\t\t\tif (decl.prop === \"column-gap\") {\n\t\t\t\tobj.gapValues[1] = decl.value\n\t\t\t}\n\n\t\t\tif (decl.prop === \"gap\") {\n\t\t\t\tobj.gapValues = postcss.list.space(decl.value);\n\t\t\t\tif (obj.gapValues.length === 1) {\n\t\t\t\t\tobj.gapValues.push(obj.gapValues[0]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\tfunction hasMargin(decl, obj) {\n\t\tif (decl.prop === \"margin\" || decl.prop === \"margin-left\" || decl.prop === \"margin-top\") {\n\t\t\tif (decl.prop === \"margin-top\") {\n\t\t\t\tobj.marginValues[0] = decl.value\n\t\t\t}\n\n\t\t\tif (decl.prop === \"margin-left\") {\n\t\t\t\tobj.marginValues[1] = decl.value\n\t\t\t}\n\n\t\t\tif (decl.prop === \"margin\") {\n\t\t\t\tobj.marginValues = postcss.list.space(decl.value);\n\t\t\t\tif (obj.marginValues.length === 1) {\n\t\t\t\t\tobj.marginValues.push(obj.marginValues[0]);\n\t\t\t\t}\n\t\t\t\tif (obj.marginValues.length > 1) {\n\t\t\t\t\tobj.marginValues = obj.marginValues.slice(0, 2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addRootSelector(root) {\n\t\tvar fileName = root.source.input.file\n\n\t\t// This avoids adding :root selector to module files used by Next.js\n\t\tif (!(fileName && fileName.endsWith(\".module.css\"))) {\n\t\t\tconst rootRule = postcss.rule({ selector: \":root\" });\n\n\t\t\troot.prepend(rootRule);\n\n\t\t\trootRule.append(\n\t\t\t\t`${pf}has-polyfil-gap-container: 0px;\n\t\t\t${pf}has-polyfil-gap-item: 0px;`\n\t\t\t);\n\n\t\t\trootRule.walk(i => { i.raws.before = \"\\n\\t\"; });\n\n\t\t}\n\t}\n\n\tfunction addWidth(rule, obj) {\n\t\tfunction ifUnit(value) {\n\t\t\tvar regex = /^calc\\(|([0-9|.]+px|cm|mm|in|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)$/\n\t\t\treturn regex.test(value)\n\t\t}\n\n\t\tif (obj.hasWidth || obj.hasHeight) {\n\t\t\trule.walkDecls((decl) => {\n\t\t\t\tvar value = parse(decl.value).nodes[0];\n\t\t\t\tlet prop = decl.prop;\n\n\t\t\t\tif (decl.value === 0) {\n\t\t\t\t\tdecl.value = \"0px\";\n\t\t\t\t}\n\n\t\t\t\tif (ifUnit(decl.value)) {\n\t\t\t\t\tconst origContainer = decl.parent;\n\n\t\t\t\t\tvar selector = {\n\t\t\t\t\t\tcontainer: `${flexGapNotSupported}${origContainer.selector}`,\n\t\t\t\t\t\treset: `${flexGapNotSupported}${origContainer.selector} > * > *`,\n\t\t\t\t\t};\n\n\t\t\t\t\tif (opts.tailwindCSS && /^.gap(?=\\b|[0-9])/gmi.test(origContainer.selector) && !obj.hasFlex) {\n\t\t\t\t\t\tselector = {\n\t\t\t\t\t\t\tcontainer: `${flexGapNotSupported}.flex${origContainer.selector}, ${flexGapNotSupported}.inline-flex${origContainer.selector}`,\n\t\t\t\t\t\t\treset: `${flexGapNotSupported}.flex${origContainer.selector} > * > *, ${flexGapNotSupported}.inline-flex${origContainer.selector} > * > *`\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tconst container = postcss.rule({ selector: selector.container });\n\t\t\t\t\tconst reset = postcss.rule({ selector: selector.reset });\n\n\t\t\t\t\torigContainer.after(container);\n\t\t\t\t\tcontainer.before(reset);\n\n\t\t\t\t\tlet axis = prop === \"width\" ? \"column\" : \"row\";\n\n\t\t\t\t\t// Percentages\n\t\t\t\t\tif (value.unit === \"%\") {\n\t\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t\t`${pf}${prop}-percentages-decimal: ${value.number / 100} !important;`\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treset.append(\n\t\t\t\t\t\t\t`${pf}${prop}-percentages-decimal: initial;`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Pixels, Ems\n\t\t\t\t\telse {\n\t\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t\t`${pf}gap-percentage-to-pixels-column: calc(-1 * ${decl.value} * var(${pf}gap_percentage-decimal-${axis})) !important;\n\t\t\t${pf}gap-percentage-to-pixels-row: calc(-1 * ${decl.value} * var(${pf}gap-percentage-decimal-${axis})) !important;`\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t\t`${pf}${prop}: calc(${decl.value} - var(${pf}gap-container-${axis}, 0%)) !important;`\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treset.append(\n\t\t\t\t\t\t\t`${pf}gap-percentage-to-pixels-column: initial;\n\t\t\t${pf}gap-percentage-to-pixels-row: initial;`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontainer.walk(i => { i.raws.before = \"\\n\\t\"; });\n\t\t\t\t\treset.walk(i => { i.raws.before = \"\\n\\t\"; });\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction addFlex(rule, obj) {\n\t\tif (obj.hasFlex) {\n\t\t\tconst origContainer = obj.rules.orig;\n\t\t\tconst container = obj.rules.container;\n\t\t\tconst item = obj.rules.item\n\n\t\t\torigContainer.after(container);\n\n\t\t\tcontainer.before(item);\n\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}has-polyfil-gap-container: initial;`\n\t\t\t);\n\t\t\titem.append(\n\t\t\t\t`${pf}has-polyfil-gap-item: initial;`\n\t\t\t);\n\n\t\t\titem.walk(i => { i.raws.before = \"\\n\\t\" });\n\t\t}\n\n\t}\n\n\tfunction addGap(rule, obj, opts) {\n\n\t\tconst origContainer = obj.rules.orig;\n\t\tconst container = obj.rules.container\n\t\tconst item = obj.rules.item\n\t\tconst reset = obj.rules.reset\n\t\tconst slotted = obj.rules.slotted\n\n\t\torigContainer.after(container);\n\t\tcontainer.before(item);\n\t\titem.before(reset);\n\n\t\t// Just a precaution incase flex gap detection has false positive\n\t\tif (opts.flexGapNotSupported) {\n\t\t\tcontainer.append(\n\t\t\t\t`gap: 0;`\n\t\t\t)\n\t\t}\n\n\t\tconst properties = [\n\t\t\t[\"row\", \"top\"],\n\t\t\t[\"column\", \"left\"]\n\t\t];\n\n\t\tproperties.forEach((property, index) => {\n\n\t\t\tvar axis = property[0];\n\t\t\tvar side = property[1];\n\n\t\t\tvar value = obj.gapValues[index];\n\n\t\t\tif (value === \"0\") {\n\t\t\t\tvalue = \"0px\";\n\t\t\t}\n\t\t\tvar number = parse(value).nodes[0].value\n\t\t\tvar unit = parse(value).nodes[0].unit;\n\n\t\t\tvar percentageRowGaps = opts.percentageRowGaps || unit != \"%\" && axis === \"row\";\n\n\t\t\t// Percentages\n\t\t\tif (unit === \"%\") {\n\t\t\t\t// formula: (parent - self) / (100 - self) * 100\n\t\t\t\tif ((percentageRowGaps && axis === \"row\") || axis === \"column\") {\n\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t`${pf}gap-percentage-decimal-${axis}: ${number / 100};\n\t\t\t\t${pf}gap-container-${axis}: var(${pf}has-polyfil-gap-container, var(${pf}gap-percentage-to-pixels-${axis}, calc( ((var(${pf}gap-parent-${axis}, 0%) - ${value}) * var(${pf}width-percentages-decimal, 1)) / (100 - ${number}) * 100))) !important;`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t`${pf}gap-container-${axis}: var(--fgp-gap-item-row) !important;`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Pixels, Ems\n\t\t\telse {\n\t\t\t\t// formula: (parent - self)\n\t\t\t\tcontainer.append(\n\t\t\t\t\t`${pf}gap-container-${axis}: var(${pf}has-polyfil-gap-container, calc(var(${pf}gap-parent-${axis}, 0px) - ${value})) !important;`\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\treset.append(\n\t\t\t\t`${pf}gap-item-${axis}: initial;`\n\t\t\t);\n\n\t\t\titem.append(\n\t\t\t\t`pointer-events: all;\n\t\t\t${pf}gap-container-${axis}: initial;\n\t\t\t${pf}gap-item-${axis}: var(${pf}has-polyfil-gap-item, ${value}) !important;\n\t\t\t${pf}gap-${axis}: var(${pf}gap-item-${axis});`\n\t\t\t);\n\n\n\t\t\tif ((percentageRowGaps && axis === \"row\") || axis === \"column\") {\n\t\t\t\titem.append(\n\t\t\t\t\t`${pf}gap-parent-${axis}: var(${pf}has-polyfil-gap-item, ${value}) !important;\n\t\t\t\t\tmargin-${side}: var(${pf}gap-${axis});`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tcontainer.append(\n\t\t\t\t`pointer-events: none;\n\t\t\t${pf}gap-parent-${axis}: initial;\n\t\t\t${pf}gap-item-${axis}: initial;\n\t\t\t${pf}gap-${axis}: var(${pf}gap-container-${axis}) !important;\n\t\t\tpadding-top: 0.02px;`\n\t\t\t);\n\n\t\t\tif ((percentageRowGaps && axis === \"row\") || axis === \"column\") {\n\t\t\t\t// Moved !important to from margin property to custom property. Not sure if this breaks anything\n\t\t\t\tcontainer.append(\n\t\t\t\t\t`${pf}margin-${side}: calc(var(${pf}gap-${axis}) + ${obj.marginValues[0]}) !important;\n\t\t\t\t\tmargin-${side}: var(${pf}margin-${side});`\n\t\t\t\t);\n\t\t\t}\n\n\n\t\t\t// If web components\n\t\t\tif (opts.webComponents === true) {\n\t\t\t\tcontainer.before(slotted);\n\n\t\t\t\tslotted.append(\n\t\t\t\t\t`${pf}gap-parent-${axis}: ${value};\n\t\t\t\t${pf}gap-item-${axis}: ${value};\n\t\t\t\t${pf}gap-${axis}: var(${pf}gap-item-${axis});`\n\t\t\t\t);\n\n\t\t\t\tif ((percentageRowGaps && axis === \"row\") || axis === \"column\") {\n\t\t\t\t\tslotted.append(\n\t\t\t\t\t\t`margin-${side}: var(${pf}gap-${axis}) !important;`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t\tcontainer.walk(i => { i.raws.before = \"\\n\\t\" });\n\t\titem.walk(i => { i.raws.before = \"\\n\\t\" });\n\t\treset.walk(i => { i.raws.before = \"\\n\\t\" });\n\t\tslotted.walk(i => { i.raws.before = \"\\n\\t\" });\n\n\t}\n\n\tfunction removeGap(rule) {\n\t\trule.walkDecls((decl) => {\n\t\t\tif (decl.prop === \"gap\" || decl.prop === \"column-gap\" || decl.prop === \"row-gap\") {\n\t\t\t\tif (typeof opts.flexGapNotSupported === 'undefined' || opts.flexGapNotSupported === \"\") {\n\t\t\t\t\t// Needs to be removed if option not defined\n\t\t\t\t\tdecl.remove()\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\treturn {\n\t\tpostcssPlugin: 'postcss-gap',\n\t\tOnce(root) {\n\n\t\t\taddRootSelector(root)\n\n\t\t\troot.walkRules(rule => {\n\t\t\t\tvar obj = {\n\t\t\t\t\trules: {},\n\t\t\t\t\tgapValues: ['0px', '0px'],\n\t\t\t\t\tmarginValues: ['0px', '0px'],\n\t\t\t\t\thasGap: false,\n\t\t\t\t\thasFlex: false\n\t\t\t\t}\n\n\t\t\t\trule.walkDecls(function (decl) {\n\t\t\t\t\thasFlex(decl, obj);\n\t\t\t\t\thasGap(decl, obj)\n\t\t\t\t\thasMargin(decl, obj)\n\t\t\t\t\thasWidth(decl, obj)\n\t\t\t\t});\n\n\n\t\t\t\taddWidth(rule, obj);\n\n\t\t\t\t// Create rules\n\t\t\t\tif (obj.hasGap && obj.hasFlex || opts.tailwindCSS && /^.gap(?=\\b|[0-9])/gmi.test(rule.selector) && !obj.hasFlex) {\n\n\t\t\t\t\tobj.rules.orig = rule\n\n\t\t\t\t\tconst rules = {\n\t\t\t\t\t\torig: rule,\n\t\t\t\t\t}\n\n\t\t\t\t\tvar selector;\n\n\t\t\t\t\tif (obj.hasGap && obj.hasFlex) {\n\t\t\t\t\t\tselector = {\n\t\t\t\t\t\t\tcontainer: `${flexGapNotSupported}${obj.rules.orig.selector}`,\n\t\t\t\t\t\t\titem: `${flexGapNotSupported}${obj.rules.orig.selector} > *`,\n\t\t\t\t\t\t\treset: `${flexGapNotSupported}${obj.rules.orig.selector} > * > *`,\n\t\t\t\t\t\t\tslotted: `${flexGapNotSupported}${obj.rules.orig.selector} > ::slotted(*)`\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.tailwindCSS && /^.gap(?=\\b|[0-9])/gmi.test(rule.selector) && !obj.hasFlex) {\n\t\t\t\t\t\tselector = {\n\t\t\t\t\t\t\tcontainer: `${flexGapNotSupported}.flex${rules.orig.selector}, ${flexGapNotSupported}.inline-flex${obj.rules.orig.selector}`,\n\t\t\t\t\t\t\titem: `${flexGapNotSupported}.flex${obj.rules.orig.selector} > *, ${flexGapNotSupported}.inline-flex${obj.rules.orig.selector} > *`,\n\t\t\t\t\t\t\treset: `${flexGapNotSupported}.flex${obj.rules.orig.selector} > * > *, ${flexGapNotSupported}.inline-flex${obj.rules.orig.selector} > * > *`,\n\t\t\t\t\t\t\tslotted: `${flexGapNotSupported}.flex${obj.rules.orig.selector} > ::slotted(*), ${flexGapNotSupported}.inline-flex${obj.rules.orig.selector} > ::slotted(*)`\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tobj.rules.container = postcss.rule({ selector: selector.container });\n\t\t\t\t\tobj.rules.item = postcss.rule({ selector: selector.item });\n\t\t\t\t\tobj.rules.reset = postcss.rule({ selector: selector.reset });\n\t\t\t\t\tobj.rules.slotted = postcss.rule({ selector: selector.slotted });\n\n\t\t\t\t\taddFlex(rule, obj);\n\t\t\t\t\taddGap(rule, obj, opts);\n\t\t\t\t\tremoveGap(rule);\n\t\t\t\t}\n\n\n\n\t\t\t})\n\n\t\t}\n\t}\n}\n\nmodule.exports.postcss = true\n"],"names":["parse","require","module","exports","opts","pf","flexGapNotSupported","hasFlex","decl","obj","prop","value","hasWidth","hasHeight","hasGap","gapValues","postcss","list","space","length","push","hasMargin","marginValues","slice","addRootSelector","root","fileName","source","input","file","endsWith","rootRule","rule","selector","prepend","append","walk","i","raws","before","addWidth","ifUnit","regex","test","walkDecls","nodes","origContainer","parent","container","reset","tailwindCSS","after","axis","unit","number","addFlex","rules","orig","item","addGap","slotted","properties","forEach","property","index","side","percentageRowGaps","webComponents","removeGap","remove","postcssPlugin","Once","walkRules"],"mappings":"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"}