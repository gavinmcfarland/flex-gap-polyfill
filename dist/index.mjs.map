{"version":3,"file":"index.mjs","sources":["../src/index.js"],"sourcesContent":["import postcss from \"postcss\";\nconst { parse } = require('postcss-values-parser');\n\nmodule.exports = (opts = {}) => {\n\topts = opts || {}\n\n\tconst pf = \"--fgp-\";\n\tconst flexGapNotSupported = opts.flexGapNotSupported ? opts.flexGapNotSupported + \" \" : \"\";\n\n\t// TODO: Seperate original styles and polyfill styles using selector :not(.supportsFlexGap)\n\n\tfunction hasFlex(decl, obj) {\n\t\tfunction createRules() {\n\n\t\t\tif (decl.prop === \"display\" && decl.value === \"flex\") {\n\t\t\t\tobj.hasFlex = true;\n\t\t\t}\n\n\t\t\tif (decl.prop === \"display\" && decl.value === \"inline-flex\") {\n\t\t\t\tobj.hasFlex = true;\n\t\t\t}\n\n\t\t\tconst origContainer = decl.parent;\n\n\t\t\tvar selector = {\n\t\t\t\tcontainer: `${flexGapNotSupported}${origContainer.selector}`,\n\t\t\t\titem: `${flexGapNotSupported}${origContainer.selector} > *`\n\t\t\t};\n\n\t\t\tif (opts.tailwindCSS && /^.gap(?=\\b|[0-9])/gmi.test(origContainer.selector) && !obj.hasFlex) {\n\t\t\t\tselector = {\n\t\t\t\t\tcontainer: `${flexGapNotSupported}.flex${origContainer.selector}, ${flexGapNotSupported}.inline-flex${origContainer.selector}`,\n\t\t\t\t\titem: `${flexGapNotSupported}.flex${origContainer.selector} > *, ${flexGapNotSupported}.inline-flex${origContainer.selector} > *`\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst container = postcss.rule({ selector: selector.container });\n\t\t\tconst item = postcss.rule({ selector: selector.item });\n\n\t\t\tif (decl.value === \"flex\" || decl.value === \"inline-flex\") {\n\t\t\t\torigContainer.after(container);\n\n\t\t\t\tcontainer.before(item);\n\n\t\t\t\tcontainer.append(\n\t\t\t\t\t`${pf}has-polyfil-gap-container: initial;`\n\t\t\t\t);\n\t\t\t\titem.append(\n\t\t\t\t\t`${pf}has-polyfil-gap-item: initial;`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\titem.walk(i => { i.raws.before = \"\\n\\t\" });\n\t\t}\n\n\t\tif (decl.prop === \"display\") {\n\t\t\tcreateRules()\n\t\t}\n\n\n\n\t}\n\n\n\tfunction addGap(rule, obj, opts) {\n\n\t\tconst origContainer = rule;\n\n\t\tvar selector = {\n\t\t\tcontainer: `${flexGapNotSupported}${origContainer.selector}`,\n\t\t\titem: `${flexGapNotSupported}${origContainer.selector} > *`,\n\t\t\treset: `${flexGapNotSupported}${origContainer.selector} > * > *`,\n\t\t\tslotted: `${flexGapNotSupported}${origContainer.selector} > ::slotted(*)`\n\t\t};\n\n\t\tif (opts.tailwindCSS && /^.gap(?=\\b|[0-9])/gmi.test(rule.selector) && !obj.hasFlex) {\n\t\t\tselector = {\n\t\t\t\tcontainer: `${flexGapNotSupported}.flex${origContainer.selector}, ${flexGapNotSupported}.inline-flex${origContainer.selector}`,\n\t\t\t\titem: `${flexGapNotSupported}.flex${origContainer.selector} > *, ${flexGapNotSupported}.inline-flex${origContainer.selector} > *`,\n\t\t\t\treset: `${flexGapNotSupported}.flex${origContainer.selector} > * > *, ${flexGapNotSupported}.inline-flex${origContainer.selector} > * > *`,\n\t\t\t\tslotted: `${flexGapNotSupported}.flex${origContainer.selector} > ::slotted(*), ${flexGapNotSupported}.inline-flex${origContainer.selector} > ::slotted(*)`\n\t\t\t};\n\t\t}\n\n\t\tconst container = postcss.rule({ selector: selector.container });\n\t\tconst item = postcss.rule({ selector: selector.item });\n\t\tconst reset = postcss.rule({ selector: selector.reset });\n\t\tconst slotted = postcss.rule({ selector: selector.slotted });\n\n\t\torigContainer.after(container);\n\n\t\tcontainer.before(item);\n\t\titem.before(reset);\n\n\t\t// Just a precaution incase flex gap detection has false positive\n\t\tif (opts.flexGapNotSupported) {\n\t\t\tcontainer.append(\n\t\t\t\t`gap: 0;`\n\t\t\t)\n\t\t}\n\n\t\tconst properties = [\n\t\t\t[\"-row\", \"top\"],\n\t\t\t[\"-column\", \"left\"]\n\t\t];\n\n\t\tproperties.forEach((property, index) => {\n\n\t\t\tvar axis = property[0];\n\t\t\tvar side = property[1];\n\n\t\t\tvar value = obj.gapValues[index];\n\n\t\t\tif (value === \"0\") {\n\t\t\t\tvalue = \"0px\";\n\t\t\t}\n\t\t\tvar number = parse(value).nodes[0].value\n\t\t\tvar unit = parse(value).nodes[0].unit;\n\n\t\t\tvar percentageRowGaps = opts.percentageRowGaps || unit != \"%\" && axis === \"-row\";\n\n\t\t\t// Percentages\n\t\t\tif (unit === \"%\") {\n\t\t\t\t// formula: (parent - self) / (100 - self) * 100\n\t\t\t\tif ((percentageRowGaps && axis === \"-row\") || axis === \"-column\") {\n\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t`${pf}gap-percentage-decimal${axis}: ${number / 100};\n\t\t\t\t${pf}gap-container${axis}: var(${pf}has-polyfil-gap-container, var(${pf}gap-percentage-to-pixels${axis}, calc( ((var(${pf}gap-parent${axis}, 0%) - ${value}) * var(${pf}width-percentages-decimal, 1)) / (100 - ${number}) * 100))) !important;`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t`${pf}gap-container${axis}: var(--fgp-gap-item-row) !important;`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Pixels, Ems\n\t\t\telse {\n\t\t\t\t// formula: (parent - self)\n\t\t\t\tcontainer.append(\n\t\t\t\t\t`${pf}gap-container${axis}: var(${pf}has-polyfil-gap-container, calc(var(${pf}gap-parent${axis}, 0px) - ${value})) !important;`\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\treset.append(\n\t\t\t\t`${pf}gap-item${axis}: initial;`\n\t\t\t);\n\n\t\t\titem.append(\n\t\t\t\t`pointer-events: all;\n\t\t\t${pf}gap-container${axis}: initial;\n\t\t\t${pf}gap-item${axis}: var(${pf}has-polyfil-gap-item, ${value}) !important;\n\t\t\t${pf}gap${axis}: var(${pf}gap-item${axis});`\n\t\t\t);\n\n\n\t\t\tif ((percentageRowGaps && axis === \"-row\") || axis === \"-column\") {\n\t\t\t\titem.append(\n\t\t\t\t\t`${pf}gap-parent${axis}: var(${pf}has-polyfil-gap-item, ${value}) !important;\n\t\t\t\t\tmargin-${side}: var(${pf}gap${axis});`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tcontainer.append(\n\t\t\t\t`pointer-events: none;\n\t\t\t${pf}gap-parent${axis}: initial;\n\t\t\t${pf}gap-item${axis}: initial;\n\t\t\t${pf}gap${axis}: var(${pf}gap-container${axis}) !important;\n\t\t\tpadding-top: 0.02px;`\n\t\t\t);\n\n\n\n\t\t\tif ((percentageRowGaps && axis === \"-row\") || axis === \"-column\") {\n\t\t\t\t// Moved !important to from margin property to custom property. Not sure if this breaks anything\n\t\t\t\tcontainer.append(\n\t\t\t\t\t`${pf}margin-${side}: calc(var(${pf}gap${axis}) + ${obj.marginValues[0]}) !important;\n\t\t\t\t\tmargin-${side}: var(${pf}margin-${side});`\n\t\t\t\t);\n\t\t\t}\n\n\n\t\t\t// If web components\n\t\t\tif (opts.webComponents === true) {\n\t\t\t\tcontainer.before(slotted);\n\n\t\t\t\tslotted.append(\n\t\t\t\t\t`${pf}gap-parent${axis}: ${value};\n\t\t\t\t${pf}gap-item${axis}: ${value};\n\t\t\t\t${pf}gap${axis}: var(${pf}gap-item${axis});`\n\t\t\t\t);\n\n\t\t\t\tif ((percentageRowGaps && axis === \"-row\") || axis === \"-column\") {\n\t\t\t\t\tslotted.append(\n\t\t\t\t\t\t`margin-${side}: var(${pf}gap${axis}) !important;`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// origContainer.append(\n\t\t\t// \t`width: 100%;\n\t\t\t// \tflex-grow: 0;`);\n\t\t});\n\n\t\tcontainer.walk(i => { i.raws.before = \"\\n\\t\" });\n\t\titem.walk(i => { i.raws.before = \"\\n\\t\" });\n\t\treset.walk(i => { i.raws.before = \"\\n\\t\" });\n\t\tslotted.walk(i => { i.raws.before = \"\\n\\t\" });\n\n\t}\n\n\tfunction removeGap(rule) {\n\t\trule.walkDecls((decl) => {\n\t\t\tif (decl.prop === \"gap\" || decl.prop === \"column-gap\" || decl.prop === \"row-gap\") {\n\t\t\t\tif (typeof opts.flexGapNotSupported === 'undefined' || opts.flexGapNotSupported === \"\") {\n\t\t\t\t\t// Needs to be removed if option not defined\n\t\t\t\t\tdecl.remove()\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction addWidth(decl, obj) {\n\t\tfunction ifUnit(value) {\n\t\t\tvar regex = /^calc\\(|([0-9|.]+px|cm|mm|in|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)$/\n\t\t\treturn regex.test(value)\n\t\t}\n\n\t\tif (decl.prop === \"width\" || decl.prop === \"height\") {\n\t\t\tvar value = parse(decl.value).nodes[0];\n\t\t\tlet prop = decl.prop;\n\n\t\t\tif (decl.value === 0) {\n\t\t\t\tdecl.value = \"0px\";\n\t\t\t}\n\n\n\n\t\t\tif (ifUnit(decl.value)) {\n\t\t\t\tconst origContainer = decl.parent;\n\n\t\t\t\tvar selector = {\n\t\t\t\t\tcontainer: `${flexGapNotSupported}${origContainer.selector}`,\n\t\t\t\t\treset: `${flexGapNotSupported}${origContainer.selector} > * > *`,\n\t\t\t\t};\n\n\t\t\t\tif (opts.tailwindCSS && /^.gap(?=\\b|[0-9])/gmi.test(origContainer.selector) && !obj.hasFlex) {\n\t\t\t\t\tselector = {\n\t\t\t\t\t\tcontainer: `${flexGapNotSupported}.flex${origContainer.selector}, ${flexGapNotSupported}.inline-flex${origContainer.selector}`,\n\t\t\t\t\t\treset: `${flexGapNotSupported}.flex${origContainer.selector} > * > *, ${flexGapNotSupported}.inline-flex${origContainer.selector} > * > *`\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst container = postcss.rule({ selector: selector.container });\n\t\t\t\tconst reset = postcss.rule({ selector: selector.reset });\n\n\t\t\t\torigContainer.after(container);\n\t\t\t\tcontainer.before(reset);\n\n\t\t\t\tlet axis = prop === \"width\" ? \"-column\" : \"-row\";\n\n\t\t\t\t// Percentages\n\t\t\t\tif (value.unit === \"%\") {\n\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t`${pf}${prop}-percentages-decimal: ${value.number / 100} !important;`\n\t\t\t\t\t);\n\n\t\t\t\t\treset.append(\n\t\t\t\t\t\t`${pf}${prop}-percentages-decimal: initial;`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Pixels, Ems\n\t\t\t\telse {\n\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t`${pf}gap-percentage-to-pixels-column: calc(-1 * ${decl.value} * var(${pf}gap_percentage-decimal${axis})) !important;\n\t\t\t${pf}gap-percentage-to-pixels-row: calc(-1 * ${decl.value} * var(${pf}gap-percentage-decimal${axis})) !important;`\n\t\t\t\t\t);\n\n\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t`${pf}${prop}: calc(${decl.value} - var(${pf}gap-container${axis}, 0%)) !important;`\n\t\t\t\t\t);\n\n\t\t\t\t\treset.append(\n\t\t\t\t\t\t`${pf}gap-percentage-to-pixels-column: initial;\n\t\t\t${pf}gap-percentage-to-pixels-row: initial;`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcontainer.walk(i => { i.raws.before = \"\\n\\t\"; });\n\t\t\t\treset.walk(i => { i.raws.before = \"\\n\\t\"; });\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction hasGap(decl, obj) {\n\t\tif (decl.prop === \"gap\" || decl.prop === \"column-gap\" || decl.prop === \"row-gap\") {\n\t\t\tobj.hasGap = true;\n\t\t\tif (decl.prop === \"row-gap\") {\n\t\t\t\tobj.gapValues[0] = decl.value\n\t\t\t}\n\n\t\t\tif (decl.prop === \"column-gap\") {\n\t\t\t\tobj.gapValues[1] = decl.value\n\t\t\t}\n\n\n\n\t\t\tif (decl.prop === \"gap\") {\n\t\t\t\tobj.gapValues = postcss.list.space(decl.value);\n\t\t\t\tif (obj.gapValues.length === 1) {\n\t\t\t\t\tobj.gapValues.push(obj.gapValues[0]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\tfunction hasMargin(decl, obj) {\n\t\tif (decl.prop === \"margin\" || decl.prop === \"margin-left\" || decl.prop === \"margin-top\") {\n\t\t\tif (decl.prop === \"margin-top\") {\n\t\t\t\tobj.marginValues[0] = decl.value\n\t\t\t}\n\n\t\t\tif (decl.prop === \"margin-left\") {\n\t\t\t\tobj.marginValues[1] = decl.value\n\t\t\t}\n\n\t\t\tif (decl.prop === \"margin\") {\n\t\t\t\tobj.marginValues = postcss.list.space(decl.value);\n\t\t\t\tif (obj.marginValues.length === 1) {\n\t\t\t\t\tobj.marginValues.push(obj.marginValues[0]);\n\t\t\t\t}\n\t\t\t\tif (obj.marginValues.length > 1) {\n\t\t\t\t\tobj.marginValues = obj.marginValues.slice(0, 2);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction addRootSelector(root) {\n\t\tvar fileName = root.source.input.file\n\n\t\t// This avoids adding :root selector to module files used by Next.js\n\t\tif (!(fileName && fileName.endsWith(\".module.css\"))) {\n\t\t\tconst rootRule = postcss.rule({ selector: \":root\" });\n\n\t\t\troot.prepend(rootRule);\n\n\t\t\trootRule.append(\n\t\t\t\t`${pf}has-polyfil-gap-container: 0px;\n\t\t\t${pf}has-polyfil-gap-item: 0px;`\n\t\t\t);\n\n\t\t\trootRule.walk(i => { i.raws.before = \"\\n\\t\"; });\n\n\t\t}\n\t}\n\n\treturn {\n\t\tpostcssPlugin: 'postcss-gap',\n\t\tOnce(root) {\n\n\t\t\taddRootSelector(root)\n\n\t\t\troot.walkRules(rule => {\n\t\t\t\tvar obj = {\n\t\t\t\t\tgapValues: ['0px', '0px'],\n\t\t\t\t\tmarginValues: ['0px', '0px'],\n\t\t\t\t\thasGap: false,\n\t\t\t\t\thasFlex: false\n\t\t\t\t}\n\n\n\t\t\t\trule.walkDecls(function (decl) {\n\n\t\t\t\t\thasFlex(decl, obj);\n\t\t\t\t\thasGap(decl, obj)\n\t\t\t\t\thasMargin(decl, obj)\n\t\t\t\t\taddWidth(decl, obj);\n\t\t\t\t});\n\n\t\t\t\tif (obj.hasGap && obj.hasFlex) {\n\t\t\t\t\taddGap(rule, obj, opts);\n\t\t\t\t\tremoveGap(rule);\n\t\t\t\t}\n\n\t\t\t\tif (opts.tailwindCSS && /^.gap(?=\\b|[0-9])/gmi.test(rule.selector) && !obj.hasFlex) {\n\t\t\t\t\taddGap(rule, obj, opts);\n\t\t\t\t\tremoveGap(rule);\n\t\t\t\t}\n\n\t\t\t})\n\n\n\t\t}\n\t}\n}\n\nmodule.exports.postcss = true\n"],"names":["parse","require","module","exports","opts","pf","flexGapNotSupported","hasFlex","decl","obj","createRules","prop","value","origContainer","parent","selector","container","item","tailwindCSS","test","postcss","rule","after","before","append","walk","i","raws","addGap","reset","slotted","properties","forEach","property","index","axis","side","gapValues","number","nodes","unit","percentageRowGaps","marginValues","webComponents","removeGap","walkDecls","remove","addWidth","ifUnit","regex","hasGap","list","space","length","push","hasMargin","slice","addRootSelector","root","fileName","source","input","file","endsWith","rootRule","prepend","postcssPlugin","Once","walkRules"],"mappings":";;AACA,MAAM;EAAEA;IAAUC,OAAO,CAAC,uBAAD,CAAzB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,CAACC,IAAI,GAAG,EAAR,KAAe;EAC/BA,IAAI,GAAGA,IAAI,IAAI,EAAf;QAEMC,EAAE,GAAG,QAAX;QACMC,mBAAmB,GAAGF,IAAI,CAACE,mBAAL,GAA2BF,IAAI,CAACE,mBAAL,GAA2B,GAAtD,GAA4D,EAAxF,CAJ+B;;WAQtBC,OAAT,CAAiBC,IAAjB,EAAuBC,GAAvB,EAA4B;aAClBC,WAAT,GAAuB;UAElBF,IAAI,CAACG,IAAL,KAAc,SAAd,IAA2BH,IAAI,CAACI,KAAL,KAAe,MAA9C,EAAsD;QACrDH,GAAG,CAACF,OAAJ,GAAc,IAAd;;;UAGGC,IAAI,CAACG,IAAL,KAAc,SAAd,IAA2BH,IAAI,CAACI,KAAL,KAAe,aAA9C,EAA6D;QAC5DH,GAAG,CAACF,OAAJ,GAAc,IAAd;;;YAGKM,aAAa,GAAGL,IAAI,CAACM,MAA3B;UAEIC,QAAQ,GAAG;QACdC,SAAS,EAAG,GAAEV,mBAAoB,GAAEO,aAAa,CAACE,QAAS,EAD7C;QAEdE,IAAI,EAAG,GAAEX,mBAAoB,GAAEO,aAAa,CAACE,QAAS;OAFvD;;UAKIX,IAAI,CAACc,WAAL,IAAoB,uBAAuBC,IAAvB,CAA4BN,aAAa,CAACE,QAA1C,CAApB,IAA2E,CAACN,GAAG,CAACF,OAApF,EAA6F;QAC5FQ,QAAQ,GAAG;UACVC,SAAS,EAAG,GAAEV,mBAAoB,QAAOO,aAAa,CAACE,QAAS,KAAIT,mBAAoB,eAAcO,aAAa,CAACE,QAAS,EADnH;UAEVE,IAAI,EAAG,GAAEX,mBAAoB,QAAOO,aAAa,CAACE,QAAS,SAAQT,mBAAoB,eAAcO,aAAa,CAACE,QAAS;SAF7H;;;YAMKC,SAAS,GAAGI,OAAO,CAACC,IAAR,CAAa;QAAEN,QAAQ,EAAEA,QAAQ,CAACC;OAAlC,CAAlB;YACMC,IAAI,GAAGG,OAAO,CAACC,IAAR,CAAa;QAAEN,QAAQ,EAAEA,QAAQ,CAACE;OAAlC,CAAb;;UAEIT,IAAI,CAACI,KAAL,KAAe,MAAf,IAAyBJ,IAAI,CAACI,KAAL,KAAe,aAA5C,EAA2D;QAC1DC,aAAa,CAACS,KAAd,CAAoBN,SAApB;QAEAA,SAAS,CAACO,MAAV,CAAiBN,IAAjB;QAEAD,SAAS,CAACQ,MAAV,CACE,GAAEnB,EAAG,qCADP;QAGAY,IAAI,CAACO,MAAL,CACE,GAAEnB,EAAG,gCADP;;;MAKDY,IAAI,CAACQ,IAAL,CAAUC,CAAC,IAAI;QAAEA,CAAC,CAACC,IAAF,CAAOJ,MAAP,GAAgB,MAAhB;OAAjB;;;QAGGf,IAAI,CAACG,IAAL,KAAc,SAAlB,EAA6B;MAC5BD,WAAW;;;;WAQJkB,MAAT,CAAgBP,IAAhB,EAAsBZ,GAAtB,EAA2BL,IAA3B,EAAiC;UAE1BS,aAAa,GAAGQ,IAAtB;QAEIN,QAAQ,GAAG;MACdC,SAAS,EAAG,GAAEV,mBAAoB,GAAEO,aAAa,CAACE,QAAS,EAD7C;MAEdE,IAAI,EAAG,GAAEX,mBAAoB,GAAEO,aAAa,CAACE,QAAS,MAFxC;MAGdc,KAAK,EAAG,GAAEvB,mBAAoB,GAAEO,aAAa,CAACE,QAAS,UAHzC;MAIde,OAAO,EAAG,GAAExB,mBAAoB,GAAEO,aAAa,CAACE,QAAS;KAJ1D;;QAOIX,IAAI,CAACc,WAAL,IAAoB,uBAAuBC,IAAvB,CAA4BE,IAAI,CAACN,QAAjC,CAApB,IAAkE,CAACN,GAAG,CAACF,OAA3E,EAAoF;MACnFQ,QAAQ,GAAG;QACVC,SAAS,EAAG,GAAEV,mBAAoB,QAAOO,aAAa,CAACE,QAAS,KAAIT,mBAAoB,eAAcO,aAAa,CAACE,QAAS,EADnH;QAEVE,IAAI,EAAG,GAAEX,mBAAoB,QAAOO,aAAa,CAACE,QAAS,SAAQT,mBAAoB,eAAcO,aAAa,CAACE,QAAS,MAFlH;QAGVc,KAAK,EAAG,GAAEvB,mBAAoB,QAAOO,aAAa,CAACE,QAAS,aAAYT,mBAAoB,eAAcO,aAAa,CAACE,QAAS,UAHvH;QAIVe,OAAO,EAAG,GAAExB,mBAAoB,QAAOO,aAAa,CAACE,QAAS,oBAAmBT,mBAAoB,eAAcO,aAAa,CAACE,QAAS;OAJ3I;;;UAQKC,SAAS,GAAGI,OAAO,CAACC,IAAR,CAAa;MAAEN,QAAQ,EAAEA,QAAQ,CAACC;KAAlC,CAAlB;UACMC,IAAI,GAAGG,OAAO,CAACC,IAAR,CAAa;MAAEN,QAAQ,EAAEA,QAAQ,CAACE;KAAlC,CAAb;UACMY,KAAK,GAAGT,OAAO,CAACC,IAAR,CAAa;MAAEN,QAAQ,EAAEA,QAAQ,CAACc;KAAlC,CAAd;UACMC,OAAO,GAAGV,OAAO,CAACC,IAAR,CAAa;MAAEN,QAAQ,EAAEA,QAAQ,CAACe;KAAlC,CAAhB;IAEAjB,aAAa,CAACS,KAAd,CAAoBN,SAApB;IAEAA,SAAS,CAACO,MAAV,CAAiBN,IAAjB;IACAA,IAAI,CAACM,MAAL,CAAYM,KAAZ,EA5BgC;;QA+B5BzB,IAAI,CAACE,mBAAT,EAA8B;MAC7BU,SAAS,CAACQ,MAAV,CACE,SADF;;;UAKKO,UAAU,GAAG,CAClB,CAAC,MAAD,EAAS,KAAT,CADkB,EAElB,CAAC,SAAD,EAAY,MAAZ,CAFkB,CAAnB;IAKAA,UAAU,CAACC,OAAX,CAAmB,CAACC,QAAD,EAAWC,KAAX,KAAqB;UAEnCC,IAAI,GAAGF,QAAQ,CAAC,CAAD,CAAnB;UACIG,IAAI,GAAGH,QAAQ,CAAC,CAAD,CAAnB;UAEIrB,KAAK,GAAGH,GAAG,CAAC4B,SAAJ,CAAcH,KAAd,CAAZ;;UAEItB,KAAK,KAAK,GAAd,EAAmB;QAClBA,KAAK,GAAG,KAAR;;;UAEG0B,MAAM,GAAGtC,KAAK,CAACY,KAAD,CAAL,CAAa2B,KAAb,CAAmB,CAAnB,EAAsB3B,KAAnC;UACI4B,IAAI,GAAGxC,KAAK,CAACY,KAAD,CAAL,CAAa2B,KAAb,CAAmB,CAAnB,EAAsBC,IAAjC;UAEIC,iBAAiB,GAAGrC,IAAI,CAACqC,iBAAL,IAA0BD,IAAI,IAAI,GAAR,IAAeL,IAAI,KAAK,MAA1E,CAbuC;;UAgBnCK,IAAI,KAAK,GAAb,EAAkB;;YAEZC,iBAAiB,IAAIN,IAAI,KAAK,MAA/B,IAA0CA,IAAI,KAAK,SAAvD,EAAkE;UACjEnB,SAAS,CAACQ,MAAV,CACE,GAAEnB,EAAG,yBAAwB8B,IAAK,KAAIG,MAAM,GAAG,GAAI;MACpDjC,EAAG,gBAAe8B,IAAK,SAAQ9B,EAAG,kCAAiCA,EAAG,2BAA0B8B,IAAK,iBAAgB9B,EAAG,aAAY8B,IAAK,WAAUvB,KAAM,WAAUP,EAAG,2CAA0CiC,MAAO,wBAFxN;SADD,MAMK;UACJtB,SAAS,CAACQ,MAAV,CACE,GAAEnB,EAAG,gBAAe8B,IAAK,uCAD3B;;OATF;WAgBK;;UAEJnB,SAAS,CAACQ,MAAV,CACE,GAAEnB,EAAG,gBAAe8B,IAAK,SAAQ9B,EAAG,uCAAsCA,EAAG,aAAY8B,IAAK,YAAWvB,KAAM,gBADjH;;;MAMDiB,KAAK,CAACL,MAAN,CACE,GAAEnB,EAAG,WAAU8B,IAAK,YADtB;MAIAlB,IAAI,CAACO,MAAL,CACE;KACAnB,EAAG,gBAAe8B,IAAK;KACvB9B,EAAG,WAAU8B,IAAK,SAAQ9B,EAAG,yBAAwBO,KAAM;KAC3DP,EAAG,MAAK8B,IAAK,SAAQ9B,EAAG,WAAU8B,IAAK,IAJzC;;UAQKM,iBAAiB,IAAIN,IAAI,KAAK,MAA/B,IAA0CA,IAAI,KAAK,SAAvD,EAAkE;QACjElB,IAAI,CAACO,MAAL,CACE,GAAEnB,EAAG,aAAY8B,IAAK,SAAQ9B,EAAG,yBAAwBO,KAAM;cACvDwB,IAAK,SAAQ/B,EAAG,MAAK8B,IAAK,IAFpC;;;MAMDnB,SAAS,CAACQ,MAAV,CACE;KACAnB,EAAG,aAAY8B,IAAK;KACpB9B,EAAG,WAAU8B,IAAK;KAClB9B,EAAG,MAAK8B,IAAK,SAAQ9B,EAAG,gBAAe8B,IAAK;wBAJ9C;;UAUKM,iBAAiB,IAAIN,IAAI,KAAK,MAA/B,IAA0CA,IAAI,KAAK,SAAvD,EAAkE;;QAEjEnB,SAAS,CAACQ,MAAV,CACE,GAAEnB,EAAG,UAAS+B,IAAK,cAAa/B,EAAG,MAAK8B,IAAK,OAAM1B,GAAG,CAACiC,YAAJ,CAAiB,CAAjB,CAAoB;cAC/DN,IAAK,SAAQ/B,EAAG,UAAS+B,IAAK,IAFxC;OAvEsC;;;UA+EnChC,IAAI,CAACuC,aAAL,KAAuB,IAA3B,EAAiC;QAChC3B,SAAS,CAACO,MAAV,CAAiBO,OAAjB;QAEAA,OAAO,CAACN,MAAR,CACE,GAAEnB,EAAG,aAAY8B,IAAK,KAAIvB,KAAM;MAChCP,EAAG,WAAU8B,IAAK,KAAIvB,KAAM;MAC5BP,EAAG,MAAK8B,IAAK,SAAQ9B,EAAG,WAAU8B,IAAK,IAHzC;;YAMKM,iBAAiB,IAAIN,IAAI,KAAK,MAA/B,IAA0CA,IAAI,KAAK,SAAvD,EAAkE;UACjEL,OAAO,CAACN,MAAR,CACE,UAASY,IAAK,SAAQ/B,EAAG,MAAK8B,IAAK,eADrC;;OAzFqC;;;;KAAxC;IAoGAnB,SAAS,CAACS,IAAV,CAAeC,CAAC,IAAI;MAAEA,CAAC,CAACC,IAAF,CAAOJ,MAAP,GAAgB,MAAhB;KAAtB;IACAN,IAAI,CAACQ,IAAL,CAAUC,CAAC,IAAI;MAAEA,CAAC,CAACC,IAAF,CAAOJ,MAAP,GAAgB,MAAhB;KAAjB;IACAM,KAAK,CAACJ,IAAN,CAAWC,CAAC,IAAI;MAAEA,CAAC,CAACC,IAAF,CAAOJ,MAAP,GAAgB,MAAhB;KAAlB;IACAO,OAAO,CAACL,IAAR,CAAaC,CAAC,IAAI;MAAEA,CAAC,CAACC,IAAF,CAAOJ,MAAP,GAAgB,MAAhB;KAApB;;;WAIQqB,SAAT,CAAmBvB,IAAnB,EAAyB;IACxBA,IAAI,CAACwB,SAAL,CAAgBrC,IAAD,IAAU;UACpBA,IAAI,CAACG,IAAL,KAAc,KAAd,IAAuBH,IAAI,CAACG,IAAL,KAAc,YAArC,IAAqDH,IAAI,CAACG,IAAL,KAAc,SAAvE,EAAkF;YAC7E,OAAOP,IAAI,CAACE,mBAAZ,KAAoC,WAApC,IAAmDF,IAAI,CAACE,mBAAL,KAA6B,EAApF,EAAwF;;UAEvFE,IAAI,CAACsC,MAAL;;;KAJH;;;WAUQC,QAAT,CAAkBvC,IAAlB,EAAwBC,GAAxB,EAA6B;aACnBuC,MAAT,CAAgBpC,KAAhB,EAAuB;UAClBqC,KAAK,GAAG,qEAAZ;aACOA,KAAK,CAAC9B,IAAN,CAAWP,KAAX,CAAP;;;QAGGJ,IAAI,CAACG,IAAL,KAAc,OAAd,IAAyBH,IAAI,CAACG,IAAL,KAAc,QAA3C,EAAqD;UAChDC,KAAK,GAAGZ,KAAK,CAACQ,IAAI,CAACI,KAAN,CAAL,CAAkB2B,KAAlB,CAAwB,CAAxB,CAAZ;UACI5B,IAAI,GAAGH,IAAI,CAACG,IAAhB;;UAEIH,IAAI,CAACI,KAAL,KAAe,CAAnB,EAAsB;QACrBJ,IAAI,CAACI,KAAL,GAAa,KAAb;;;UAKGoC,MAAM,CAACxC,IAAI,CAACI,KAAN,CAAV,EAAwB;cACjBC,aAAa,GAAGL,IAAI,CAACM,MAA3B;YAEIC,QAAQ,GAAG;UACdC,SAAS,EAAG,GAAEV,mBAAoB,GAAEO,aAAa,CAACE,QAAS,EAD7C;UAEdc,KAAK,EAAG,GAAEvB,mBAAoB,GAAEO,aAAa,CAACE,QAAS;SAFxD;;YAKIX,IAAI,CAACc,WAAL,IAAoB,uBAAuBC,IAAvB,CAA4BN,aAAa,CAACE,QAA1C,CAApB,IAA2E,CAACN,GAAG,CAACF,OAApF,EAA6F;UAC5FQ,QAAQ,GAAG;YACVC,SAAS,EAAG,GAAEV,mBAAoB,QAAOO,aAAa,CAACE,QAAS,KAAIT,mBAAoB,eAAcO,aAAa,CAACE,QAAS,EADnH;YAEVc,KAAK,EAAG,GAAEvB,mBAAoB,QAAOO,aAAa,CAACE,QAAS,aAAYT,mBAAoB,eAAcO,aAAa,CAACE,QAAS;WAFlI;;;cAKKC,SAAS,GAAGI,OAAO,CAACC,IAAR,CAAa;UAAEN,QAAQ,EAAEA,QAAQ,CAACC;SAAlC,CAAlB;cACMa,KAAK,GAAGT,OAAO,CAACC,IAAR,CAAa;UAAEN,QAAQ,EAAEA,QAAQ,CAACc;SAAlC,CAAd;QAEAhB,aAAa,CAACS,KAAd,CAAoBN,SAApB;QACAA,SAAS,CAACO,MAAV,CAAiBM,KAAjB;YAEIM,IAAI,GAAGxB,IAAI,KAAK,OAAT,GAAmB,SAAnB,GAA+B,MAA1C,CApBuB;;YAuBnBC,KAAK,CAAC4B,IAAN,KAAe,GAAnB,EAAwB;UACvBxB,SAAS,CAACQ,MAAV,CACE,GAAEnB,EAAG,GAAEM,IAAK,yBAAwBC,KAAK,CAAC0B,MAAN,GAAe,GAAI,cADzD;UAIAT,KAAK,CAACL,MAAN,CACE,GAAEnB,EAAG,GAAEM,IAAK,gCADd;SALD;aAWK;YACJK,SAAS,CAACQ,MAAV,CACE,GAAEnB,EAAG,8CAA6CG,IAAI,CAACI,KAAM,UAASP,EAAG,yBAAwB8B,IAAK;KACxG9B,EAAG,2CAA0CG,IAAI,CAACI,KAAM,UAASP,EAAG,yBAAwB8B,IAAK,gBAFjG;YAKAnB,SAAS,CAACQ,MAAV,CACE,GAAEnB,EAAG,GAAEM,IAAK,UAASH,IAAI,CAACI,KAAM,UAASP,EAAG,gBAAe8B,IAAK,oBADlE;YAIAN,KAAK,CAACL,MAAN,CACE,GAAEnB,EAAG;KACPA,EAAG,wCAFH;;;QAMDW,SAAS,CAACS,IAAV,CAAeC,CAAC,IAAI;UAAEA,CAAC,CAACC,IAAF,CAAOJ,MAAP,GAAgB,MAAhB;SAAtB;QACAM,KAAK,CAACJ,IAAN,CAAWC,CAAC,IAAI;UAAEA,CAAC,CAACC,IAAF,CAAOJ,MAAP,GAAgB,MAAhB;SAAlB;;;;;WAMM2B,MAAT,CAAgB1C,IAAhB,EAAsBC,GAAtB,EAA2B;QACtBD,IAAI,CAACG,IAAL,KAAc,KAAd,IAAuBH,IAAI,CAACG,IAAL,KAAc,YAArC,IAAqDH,IAAI,CAACG,IAAL,KAAc,SAAvE,EAAkF;MACjFF,GAAG,CAACyC,MAAJ,GAAa,IAAb;;UACI1C,IAAI,CAACG,IAAL,KAAc,SAAlB,EAA6B;QAC5BF,GAAG,CAAC4B,SAAJ,CAAc,CAAd,IAAmB7B,IAAI,CAACI,KAAxB;;;UAGGJ,IAAI,CAACG,IAAL,KAAc,YAAlB,EAAgC;QAC/BF,GAAG,CAAC4B,SAAJ,CAAc,CAAd,IAAmB7B,IAAI,CAACI,KAAxB;;;UAKGJ,IAAI,CAACG,IAAL,KAAc,KAAlB,EAAyB;QACxBF,GAAG,CAAC4B,SAAJ,GAAgBjB,OAAO,CAAC+B,IAAR,CAAaC,KAAb,CAAmB5C,IAAI,CAACI,KAAxB,CAAhB;;YACIH,GAAG,CAAC4B,SAAJ,CAAcgB,MAAd,KAAyB,CAA7B,EAAgC;UAC/B5C,GAAG,CAAC4B,SAAJ,CAAciB,IAAd,CAAmB7C,GAAG,CAAC4B,SAAJ,CAAc,CAAd,CAAnB;;;;;;WAOKkB,SAAT,CAAmB/C,IAAnB,EAAyBC,GAAzB,EAA8B;QACzBD,IAAI,CAACG,IAAL,KAAc,QAAd,IAA0BH,IAAI,CAACG,IAAL,KAAc,aAAxC,IAAyDH,IAAI,CAACG,IAAL,KAAc,YAA3E,EAAyF;UACpFH,IAAI,CAACG,IAAL,KAAc,YAAlB,EAAgC;QAC/BF,GAAG,CAACiC,YAAJ,CAAiB,CAAjB,IAAsBlC,IAAI,CAACI,KAA3B;;;UAGGJ,IAAI,CAACG,IAAL,KAAc,aAAlB,EAAiC;QAChCF,GAAG,CAACiC,YAAJ,CAAiB,CAAjB,IAAsBlC,IAAI,CAACI,KAA3B;;;UAGGJ,IAAI,CAACG,IAAL,KAAc,QAAlB,EAA4B;QAC3BF,GAAG,CAACiC,YAAJ,GAAmBtB,OAAO,CAAC+B,IAAR,CAAaC,KAAb,CAAmB5C,IAAI,CAACI,KAAxB,CAAnB;;YACIH,GAAG,CAACiC,YAAJ,CAAiBW,MAAjB,KAA4B,CAAhC,EAAmC;UAClC5C,GAAG,CAACiC,YAAJ,CAAiBY,IAAjB,CAAsB7C,GAAG,CAACiC,YAAJ,CAAiB,CAAjB,CAAtB;;;YAEGjC,GAAG,CAACiC,YAAJ,CAAiBW,MAAjB,GAA0B,CAA9B,EAAiC;UAChC5C,GAAG,CAACiC,YAAJ,GAAmBjC,GAAG,CAACiC,YAAJ,CAAiBc,KAAjB,CAAuB,CAAvB,EAA0B,CAA1B,CAAnB;;;;;;WAKKC,eAAT,CAAyBC,IAAzB,EAA+B;QAC1BC,QAAQ,GAAGD,IAAI,CAACE,MAAL,CAAYC,KAAZ,CAAkBC,IAAjC,CAD8B;;QAI1B,EAAEH,QAAQ,IAAIA,QAAQ,CAACI,QAAT,CAAkB,aAAlB,CAAd,CAAJ,EAAqD;YAC9CC,QAAQ,GAAG5C,OAAO,CAACC,IAAR,CAAa;QAAEN,QAAQ,EAAE;OAAzB,CAAjB;MAEA2C,IAAI,CAACO,OAAL,CAAaD,QAAb;MAEAA,QAAQ,CAACxC,MAAT,CACE,GAAEnB,EAAG;KACLA,EAAG,4BAFL;MAKA2D,QAAQ,CAACvC,IAAT,CAAcC,CAAC,IAAI;QAAEA,CAAC,CAACC,IAAF,CAAOJ,MAAP,GAAgB,MAAhB;OAArB;;;;SAKK;IACN2C,aAAa,EAAE,aADT;;IAENC,IAAI,CAACT,IAAD,EAAO;MAEVD,eAAe,CAACC,IAAD,CAAf;MAEAA,IAAI,CAACU,SAAL,CAAe/C,IAAI,IAAI;YAClBZ,GAAG,GAAG;UACT4B,SAAS,EAAE,CAAC,KAAD,EAAQ,KAAR,CADF;UAETK,YAAY,EAAE,CAAC,KAAD,EAAQ,KAAR,CAFL;UAGTQ,MAAM,EAAE,KAHC;UAIT3C,OAAO,EAAE;SAJV;QAQAc,IAAI,CAACwB,SAAL,CAAe,UAAUrC,IAAV,EAAgB;UAE9BD,OAAO,CAACC,IAAD,EAAOC,GAAP,CAAP;UACAyC,MAAM,CAAC1C,IAAD,EAAOC,GAAP,CAAN;UACA8C,SAAS,CAAC/C,IAAD,EAAOC,GAAP,CAAT;UACAsC,QAAQ,CAACvC,IAAD,EAAOC,GAAP,CAAR;SALD;;YAQIA,GAAG,CAACyC,MAAJ,IAAczC,GAAG,CAACF,OAAtB,EAA+B;UAC9BqB,MAAM,CAACP,IAAD,EAAOZ,GAAP,EAAYL,IAAZ,CAAN;UACAwC,SAAS,CAACvB,IAAD,CAAT;;;YAGGjB,IAAI,CAACc,WAAL,IAAoB,uBAAuBC,IAAvB,CAA4BE,IAAI,CAACN,QAAjC,CAApB,IAAkE,CAACN,GAAG,CAACF,OAA3E,EAAoF;UACnFqB,MAAM,CAACP,IAAD,EAAOZ,GAAP,EAAYL,IAAZ,CAAN;UACAwC,SAAS,CAACvB,IAAD,CAAT;;OAxBF;;;GANF;CArWD;;AA6YAnB,MAAM,CAACC,OAAP,CAAeiB,OAAf,GAAyB,IAAzB"}