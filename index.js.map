{"version":3,"file":"index.js","sources":["src/index.js"],"sourcesContent":["import postcss from \"postcss\";\nvar valueParser = require('postcss-value-parser');\n\nconst pf = \"--fgp-\";\nconst CS = \" > *\";\nconst SS = \" > ::slotted(*)\";\n\n// function supportNativeSolution(decl) {\n// \tconst container = decl.parent;\n\n// \tconst item = postcss.rule({ selector: container.selector + CS });\n\n// \tvar mediaRule = postcss.rule({ selector: '@media (pointer: coarse), (pointer: fine)' })\n// \tvar supportsRule = postcss.rule({ selector: '@supports (-moz-user-select: none) or (width: max(1px, 2px))' })\n// \tvar cssRule = postcss.rule({ selector: container.selector })\n\n// \tvar cssRule2 = postcss.rule({ selector: item.selector })\n\n// \tsupportsRule.append(cssRule2)\n\n// \tsupportsRule.append(cssRule)\n\n// \tcssRule2.append(\n// \t\t`margin: initial;`\n// \t);\n\n// \tcssRule.append(\n// \t\t`margin-top: initial;\n// \t\t padding: initial;`\n// \t);\n\n// \tmediaRule.append(supportsRule)\n\n// \tcontainer.after(mediaRule)\n// }\n\nfunction hasFlex(decl) {\n\tconst container = decl.parent;\n\n\tconst item = postcss.rule({ selector: container.selector + CS });\n\n\tif (decl.value === \"flex\" || decl.value === \"inline-flex\") {\n\t\tcontainer.before(item);\n\n\t\tcontainer.append(\n\t\t\t`${pf}has-polyfil_gap-container: initial;`\n\t\t);\n\t\titem.append(\n\t\t\t`${pf}has-polyfil_gap-item: initial;`\n\t\t);\n\t}\n\n\titem.walk(i => { i.raws.before = \"\\n\\t\" });\n}\n\n\nfunction addGap(rule, values, marginValues, opts) {\n\n\tconst container = rule;\n\n\tconst item = postcss.rule({ selector: container.selector + CS });\n\tconst reset = postcss.rule({ selector: container.selector + CS + CS });\n\tconst slotted = postcss.rule({ selector: container.selector + SS });\n\tcontainer.before(item);\n\titem.before(reset);\n\n\tconst properties = [\"_row\", \"_column\"];\n\n\tproperties.forEach((axis, index) => {\n\n\t\tvar value = values[index];\n\n\t\tif (value === \"0\") {\n\t\t\tvalue = \"0px\";\n\t\t}\n\t\tvar number = valueParser.unit(value).number;\n\t\tvar unit = valueParser.unit(value).unit;\n\n\t\tvar percentageRowGaps = opts.percentageRowGaps || unit != \"%\" && axis === \"_row\";\n\n\t\tconsole.log(percentageRowGaps)\n\n\n\n\t\t// Percentages\n\t\tif (unit === \"%\") {\n\t\t\t// formula: (parent - self) / (100 - self) * 100\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}gap_percentage-decimal${axis}: ${number / 100};\n\t\t\t\t${pf}gap_container${axis}: var(${pf}has-polyfil_gap-container, var(${pf}gap_percentage-to-pixels${axis}, calc( ((var(${pf}gap_parent${axis}, 0%) - ${value}) * var(${pf}width_percentages-decimal, 1)) / (100 - ${number}) * 100))) !important;`\n\t\t\t);\n\n\t\t}\n\n\t\t// Pixels, Ems\n\t\telse {\n\t\t\t// formula: (parent - self)\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}gap_container${axis}: var(${pf}has-polyfil_gap-container, calc(var(${pf}gap_parent${axis}, 0px) - ${value})) !important;`\n\t\t\t);\n\n\t\t}\n\n\t\treset.append(\n\t\t\t`${pf}gap_item${axis}: initial;`\n\t\t);\n\n\t\titem.append(\n\t\t\t`pointer-events: all;\n\t\t\t${pf}gap_container${axis}: initial;\n\t\t\t${pf}gap_parent${axis}: var(${pf}has-polyfil_gap-item, ${value}) !important;\n\t\t\t${pf}gap_item${axis}: var(${pf}has-polyfil_gap-item, ${value}) !important;\n\t\t\t${pf}gap${axis}: var(${pf}gap_item${axis});`\n\t\t);\n\n\n\n\t\tif (percentageRowGaps) {\n\t\t\tif (axis === \"_row\") {\n\t\t\t\titem.append(\n\t\t\t\t\t`margin-top: var(${pf}gap${axis});`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (axis === \"_column\") {\n\t\t\titem.append(\n\t\t\t\t`margin-right: var(${pf}gap${axis});`\n\t\t\t);\n\t\t}\n\n\t\tcontainer.append(\n\t\t\t`pointer-events: none;\n\t\t\t${pf}gap_parent${axis}: initial;\n\t\t\t${pf}gap_item${axis}: initial;\n\t\t\t${pf}gap${axis}: var(${pf}gap_container${axis}) !important;\n\t\t\tpadding-top: 0.02px;`\n\t\t);\n\n\t\tif (percentageRowGaps) {\n\t\t\tif (axis === \"_row\") {\n\t\t\t\tcontainer.append(\n\t\t\t\t\t`${pf}margin-top: calc(var(${pf}gap${axis}) + ${marginValues[0]});\n\t\t\t\t\tmargin-top: var(${pf}margin-top) !important;`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (axis === \"_column\") {\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}margin-right: calc(var(${pf}gap${axis}) + ${marginValues[1]});\n\t\t\t\tmargin-right: var(${pf}margin-right) !important;`\n\t\t\t);\n\t\t}\n\n\t\t// If web components\n\t\tif (opts.webComponents === true) {\n\t\t\tcontainer.before(slotted);\n\n\t\t\tslotted.append(\n\t\t\t\t`${pf}gap_parent${axis}: ${value};\n\t\t\t\t${pf}gap_item${axis}: ${value};\n\t\t\t\t${pf}gap${axis}: var(${pf}gap_item${axis});`\n\t\t\t);\n\n\t\t\tif (percentageRowGaps) {\n\t\t\t\tif (axis === \"_row\") {\n\t\t\t\t\tslotted.append(\n\t\t\t\t\t\t`margin-top: var(${pf}gap${axis}) !important;`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (axis === \"_column\") {\n\t\t\t\tslotted.append(\n\t\t\t\t\t`margin-right: var(${pf}gap${axis}) !important;`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// container.append(\n\t\t// \t`width: 100%;\n\t\t// \tflex-grow: 0;`);\n\t});\n\n\n\n\tcontainer.walk(i => { i.raws.before = \"\\n\\t\" });\n\titem.walk(i => { i.raws.before = \"\\n\\t\" });\n\treset.walk(i => { i.raws.before = \"\\n\\t\" });\n\tslotted.walk(i => { i.raws.before = \"\\n\\t\" });\n\n}\n\nfunction removeGap(rule) {\n\trule.walkDecls((decl) => {\n\t\tif (decl.prop === \"gap\" || decl.prop === \"column-gap\" || decl.prop === \"row-gap\") {\n\t\t\tdecl.remove()\n\t\t}\n\t})\n}\n\n// function removeMargin(rule) {\n// \trule.walkDecls((decl) => {\n// \t\tif (decl.prop === \"margin-right\" || decl.prop === \"margin-top\") {\n// \t\t\tdecl.remove()\n// \t\t}\n// \t})\n// }\n\nfunction addWidth(decl) {\n\n\tvar value = valueParser.unit(decl.value);\n\tlet prop = decl.prop;\n\n\tif (decl.value === 0) {\n\t\tdecl.value = \"0px\";\n\t}\n\n\tconst container = decl.parent;\n\tconst reset = postcss.rule({ selector: container.selector + CS });\n\n\tcontainer.before(reset);\n\n\tlet axis = \"\";\n\n\tif (prop === \"width\") {\n\t\taxis = \"_column\";\n\t}\n\telse {\n\t\taxis = \"_row\"\n\t}\n\n\t// Percentages\n\tif (value.unit === \"%\") {\n\t\tcontainer.append(\n\t\t\t`${pf}${prop}_percentages-decimal: ${value.number / 100} !important;`\n\t\t);\n\t\t// container.append(\n\t\t// \t`${pf}${prop}: calc(${decl.value} - var(${pf}gap_container${axis}, 0%)) !important;`\n\t\t// );\n\n\t\treset.append(\n\t\t\t`${pf}${prop}_percentages-decimal: initial;`\n\t\t);\n\t}\n\n\t// Pixels, Ems\n\telse {\n\t\tcontainer.append(\n\t\t\t`${pf}gap_percentage-to-pixels_column: calc(${\"-\" + decl.value} * var(${pf}gap_percentage-decimal${axis})) !important;\n\t\t\t${pf}gap_percentage-to-pixels_row: calc(${\"-\" + decl.value} * var(${pf}gap_percentage-decimal${axis})) !important;`\n\t\t);\n\t\tcontainer.append(\n\t\t\t`${pf}${prop}: calc(${decl.value} - var(${pf}gap_container${axis}, 0%)) !important;`\n\t\t);\n\n\t\treset.append(\n\t\t\t`${pf}gap_percentage-to-pixels_column: initial;\n\t\t\t${pf}gap_percentage-to-pixels_row: initial;`\n\t\t);\n\t}\n\n\t// decl.before(\n\t// \t`${prop}: var(${pf}${prop});`\n\t// );\n\n\t// decl.remove();\n\n\tcontainer.walk(i => { i.raws.before = \"\\n\\t\"; });\n\treset.walk(i => { i.raws.before = \"\\n\\t\"; });\n\n\n}\n\nexport default postcss.plugin(\"postcss-gap\", (opts) => {\n\topts = opts || {}\n\n\treturn function (css) {\n\t\tconst root = postcss.rule({ selector: \":root\" });\n\n\t\tcss.prepend(root);\n\n\t\troot.append(\n\t\t\t`${pf}has-polyfil_gap-container: 0px;\n\t\t\t${pf}has-polyfil_gap-item: 0px;`\n\t\t);\n\n\t\troot.walk(i => { i.raws.before = \"\\n\\t\"; });\n\n\n\n\t\tcss.walkRules(rule => {\n\t\t\tvar gapValue = ['', '']\n\t\t\tvar marginValues = ['0px', '0px'];\n\t\t\tvar hasGap = false;\n\t\t\tvar hassFlex = false;\n\n\t\t\trule.walkDecls(function (decl) {\n\t\t\t\tif (decl.prop === \"width\" || decl.prop === \"height\") {\n\t\t\t\t\taddWidth(decl);\n\t\t\t\t}\n\t\t\t\tif (decl.prop === \"display\") {\n\t\t\t\t\thasFlex(decl);\n\t\t\t\t}\n\n\t\t\t\t// var regex = /(?:(\\w+)-)?(gap)/gi\n\t\t\t\t// /^gap|gap$/.test(decl.prop)\n\n\n\n\t\t\t\tif (decl.prop === \"gap\" || decl.prop === \"column-gap\" || decl.prop === \"row-gap\") {\n\t\t\t\t\thasGap = true;\n\t\t\t\t\tif (decl.prop === \"row-gap\") {\n\t\t\t\t\t\tgapValue[0] = decl.value\n\t\t\t\t\t}\n\n\t\t\t\t\tif (decl.prop === \"column-gap\") {\n\t\t\t\t\t\tgapValue[1] = decl.value\n\t\t\t\t\t}\n\n\n\n\t\t\t\t\tif (decl.prop === \"gap\") {\n\t\t\t\t\t\tgapValue = postcss.list.space(decl.value);\n\t\t\t\t\t\tif (gapValue.length === 1) {\n\t\t\t\t\t\t\tgapValue.push(gapValue[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (decl.prop === \"display\" && decl.value === \"flex\") {\n\t\t\t\t\thassFlex = true;\n\t\t\t\t}\n\n\t\t\t\tif (decl.prop === \"display\" && decl.value === \"inline-flex\") {\n\t\t\t\t\thassFlex = true;\n\t\t\t\t}\n\n\t\t\t\tif (decl.prop === \"margin\" || decl.prop === \"margin-right\" || decl.prop === \"margin-top\") {\n\t\t\t\t\tif (decl.prop === \"margin-top\") {\n\t\t\t\t\t\tmarginValues[0] = decl.value\n\t\t\t\t\t}\n\n\t\t\t\t\tif (decl.prop === \"margin-right\") {\n\t\t\t\t\t\tmarginValues[1] = decl.value\n\t\t\t\t\t}\n\n\t\t\t\t\tif (decl.prop === \"margin\") {\n\t\t\t\t\t\tmarginValues = postcss.list.space(decl.value);\n\t\t\t\t\t\tif (marginValues.length === 1) {\n\t\t\t\t\t\t\tmarginValues.push(marginValues[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (marginValues.length > 1) {\n\t\t\t\t\t\t\tmarginValues = marginValues.slice(0, 2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tif (hasGap && hassFlex) {\n\t\t\t\taddGap(rule, gapValue, marginValues, opts);\n\t\t\t\tremoveGap(rule);\n\t\t\t\t// removeMargin(rule);\n\n\t\t\t\t// supportNativeSolution(decl);\n\t\t\t}\n\t\t})\n\n\n\n\t};\n});\n"],"names":["valueParser","require","pf","CS","SS","hasFlex","decl","container","parent","item","postcss","rule","selector","value","before","append","walk","i","raws","addGap","values","marginValues","opts","reset","slotted","properties","forEach","axis","index","number","unit","percentageRowGaps","console","log","webComponents","removeGap","walkDecls","prop","remove","addWidth","plugin","css","root","prepend","walkRules","gapValue","hasGap","hassFlex","list","space","length","push","slice"],"mappings":"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"}