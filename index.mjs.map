{"version":3,"file":"index.mjs","sources":["src/index.js"],"sourcesContent":["import postcss from \"postcss\";\nconst { parse } = require('postcss-values-parser');\n\nconst pf = \"--fgp-\";\nconst CS = \" > *\";\nconst SS = \" > ::slotted(*)\";\n\n// function supportNativeSolution(decl) {\n// \tconst container = decl.parent;\n\n// \tconst item = postcss.rule({ selector: container.selector + CS });\n\n// \tvar mediaRule = postcss.rule({ selector: '@media (pointer: coarse), (pointer: fine)' })\n// \tvar supportsRule = postcss.rule({ selector: '@supports (-moz-user-select: none) or (width: max(1px, 2px))' })\n// \tvar cssRule = postcss.rule({ selector: container.selector })\n\n// \tvar cssRule2 = postcss.rule({ selector: item.selector })\n\n// \tsupportsRule.append(cssRule2)\n\n// \tsupportsRule.append(cssRule)\n\n// \tcssRule2.append(\n// \t\t`margin: initial;`\n// \t);\n\n// \tcssRule.append(\n// \t\t`margin-top: initial;\n// \t\t padding: initial;`\n// \t);\n\n// \tmediaRule.append(supportsRule)\n\n// \tcontainer.after(mediaRule)\n// }\n\nfunction hasFlex(decl) {\n\tconst container = decl.parent;\n\n\tconst item = postcss.rule({ selector: container.selector + CS });\n\n\tif (decl.value === \"flex\" || decl.value === \"inline-flex\") {\n\t\tcontainer.before(item);\n\n\t\tcontainer.append(\n\t\t\t`${pf}has-polyfil_gap-container: initial;`\n\t\t);\n\t\titem.append(\n\t\t\t`${pf}has-polyfil_gap-item: initial;`\n\t\t);\n\t}\n\n\titem.walk(i => { i.raws.before = \"\\n\\t\" });\n}\n\n\nfunction addGap(rule, values, marginValues, opts) {\n\n\tconst container = rule;\n\n\tconst item = postcss.rule({ selector: container.selector + CS });\n\tconst reset = postcss.rule({ selector: container.selector + CS + CS });\n\tconst slotted = postcss.rule({ selector: container.selector + SS });\n\tcontainer.before(item);\n\titem.before(reset);\n\n\tconst properties = [\n\t\t[\"_row\", \"top\"],\n\t\t[\"_column\", \"left\"]\n\t];\n\n\tproperties.forEach((property, index) => {\n\n\t\tvar axis = property[0];\n\t\tvar side = property[1];\n\n\t\tvar value = values[index];\n\n\t\tif (value === \"0\") {\n\t\t\tvalue = \"0px\";\n\t\t}\n\t\tvar number = parse(value).nodes[0].value\n\t\tvar unit = parse(value).nodes[0].unit;\n\n\t\tvar percentageRowGaps = opts.percentageRowGaps || unit != \"%\" && axis === \"_row\";\n\n\t\t// Percentages\n\t\tif (unit === \"%\") {\n\t\t\t// formula: (parent - self) / (100 - self) * 100\n\t\t\tif ((percentageRowGaps && axis === \"_row\") || axis === \"_column\") {\n\t\t\t\tcontainer.append(\n\t\t\t\t\t`${pf}gap_percentage-decimal${axis}: ${number / 100};\n\t\t\t\t${pf}gap_container${axis}: var(${pf}has-polyfil_gap-container, var(${pf}gap_percentage-to-pixels${axis}, calc( ((var(${pf}gap_parent${axis}, 0%) - ${value}) * var(${pf}width_percentages-decimal, 1)) / (100 - ${number}) * 100))) !important;`\n\t\t\t\t);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcontainer.append(\n\t\t\t\t\t`${pf}gap_container${axis}: var(--fgp-gap_item_row) !important;`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Pixels, Ems\n\t\telse {\n\t\t\t// formula: (parent - self)\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}gap_container${axis}: var(${pf}has-polyfil_gap-container, calc(var(${pf}gap_parent${axis}, 0px) - ${value})) !important;`\n\t\t\t);\n\n\t\t}\n\n\t\treset.append(\n\t\t\t`${pf}gap_item${axis}: initial;`\n\t\t);\n\n\t\titem.append(\n\t\t\t`pointer-events: all;\n\t\t\t${pf}gap_container${axis}: initial;\n\t\t\t${pf}gap_item${axis}: var(${pf}has-polyfil_gap-item, ${value}) !important;\n\t\t\t${pf}gap${axis}: var(${pf}gap_item${axis});`\n\t\t);\n\n\n\t\tif ((percentageRowGaps && axis === \"_row\") || axis === \"_column\") {\n\t\t\titem.append(\n\t\t\t\t`${pf}gap_parent${axis}: var(${pf}has-polyfil_gap-item, ${value}) !important;\n\t\t\t\t\tmargin-${side}: var(${pf}gap${axis});`\n\t\t\t);\n\t\t}\n\n\t\tcontainer.append(\n\t\t\t`pointer-events: none;\n\t\t\t${pf}gap_parent${axis}: initial;\n\t\t\t${pf}gap_item${axis}: initial;\n\t\t\t${pf}gap${axis}: var(${pf}gap_container${axis}) !important;\n\t\t\tpadding-top: 0.02px;`\n\t\t);\n\n\n\n\t\tif ((percentageRowGaps && axis === \"_row\") || axis === \"_column\") {\n\t\t\t// Moved !important to from margin property to custom property. Not sure if this breaks anything\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}margin-${side}: calc(var(${pf}gap${axis}) + ${marginValues[0]}) !important;\n\t\t\t\t\tmargin-${side}: var(${pf}margin-${side});`\n\t\t\t);\n\t\t}\n\n\n\t\t// If web components\n\t\tif (opts.webComponents === true) {\n\t\t\tcontainer.before(slotted);\n\n\t\t\tslotted.append(\n\t\t\t\t`${pf}gap_parent${axis}: ${value};\n\t\t\t\t${pf}gap_item${axis}: ${value};\n\t\t\t\t${pf}gap${axis}: var(${pf}gap_item${axis});`\n\t\t\t);\n\n\t\t\tif ((percentageRowGaps && axis === \"_row\") || axis === \"_column\") {\n\t\t\t\tslotted.append(\n\t\t\t\t\t`margin-${side}: var(${pf}gap${axis}) !important;`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// container.append(\n\t\t// \t`width: 100%;\n\t\t// \tflex-grow: 0;`);\n\t});\n\n\n\n\tcontainer.walk(i => { i.raws.before = \"\\n\\t\" });\n\titem.walk(i => { i.raws.before = \"\\n\\t\" });\n\treset.walk(i => { i.raws.before = \"\\n\\t\" });\n\tslotted.walk(i => { i.raws.before = \"\\n\\t\" });\n\n}\n\nfunction removeGap(rule) {\n\trule.walkDecls((decl) => {\n\t\tif (decl.prop === \"gap\" || decl.prop === \"column-gap\" || decl.prop === \"row-gap\") {\n\t\t\tdecl.remove()\n\t\t}\n\t})\n}\n\n// function removeMargin(rule) {\n// \trule.walkDecls((decl) => {\n// \t\tif (decl.prop === \"margin-left\" || decl.prop === \"margin-top\") {\n// \t\t\tdecl.remove()\n// \t\t}\n// \t})\n// }\n\nfunction addWidth(decl) {\n\n\tvar value = parse(decl.value).nodes[0];\n\tlet prop = decl.prop;\n\n\tif (decl.value === 0) {\n\t\tdecl.value = \"0px\";\n\t}\n\n\tfunction ifUnit(value) {\n\t\tvar regex = /^calc\\(|([0-9|.]+px|cm|mm|in|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)$/\n\t\treturn regex.test(value)\n\t}\n\n\tif (ifUnit(decl.value)) {\n\t\tconst container = decl.parent;\n\t\tconst reset = postcss.rule({ selector: container.selector + CS });\n\n\t\tcontainer.before(reset);\n\n\t\tlet axis = \"\";\n\n\t\tif (prop === \"width\") {\n\t\t\taxis = \"_column\";\n\t\t}\n\t\telse {\n\t\t\taxis = \"_row\"\n\t\t}\n\n\t\t// Percentages\n\t\tif (value.unit === \"%\") {\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}${prop}_percentages-decimal: ${value.number / 100} !important;`\n\t\t\t);\n\t\t\t// container.append(\n\t\t\t// \t`${pf}${prop}: calc(${decl.value} - var(${pf}gap_container${axis}, 0%)) !important;`\n\t\t\t// );\n\n\t\t\treset.append(\n\t\t\t\t`${pf}${prop}_percentages-decimal: initial;`\n\t\t\t);\n\t\t}\n\n\t\t// Pixels, Ems\n\t\telse {\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}gap_percentage-to-pixels_column: calc(-1 * ${decl.value} * var(${pf}gap_percentage-decimal${axis})) !important;\n\t\t\t${pf}gap_percentage-to-pixels_row: calc(-1 * ${decl.value} * var(${pf}gap_percentage-decimal${axis})) !important;`\n\t\t\t);\n\t\t\tcontainer.append(\n\t\t\t\t`${pf}${prop}: calc(${decl.value} - var(${pf}gap_container${axis}, 0%)) !important;`\n\t\t\t);\n\n\t\t\treset.append(\n\t\t\t\t`${pf}gap_percentage-to-pixels_column: initial;\n\t\t\t${pf}gap_percentage-to-pixels_row: initial;`\n\t\t\t);\n\t\t}\n\n\t\t// decl.before(\n\t\t// \t`${prop}: var(${pf}${prop});`\n\t\t// );\n\n\t\t// decl.remove();\n\n\t\tcontainer.walk(i => { i.raws.before = \"\\n\\t\"; });\n\t\treset.walk(i => { i.raws.before = \"\\n\\t\"; });\n\t}\n\n\n\n\n}\n\nmodule.exports = (opts = {}) => {\n\topts = opts || {}\n\treturn {\n\t\tpostcssPlugin: 'postcss-gap',\n\t\tOnce(root) {\n\n\t\t\tvar fileName = root.source.input.file\n\n\t\t\t// This avoids adding :root selector to module files used by Next.js\n\t\t\tif (!(fileName && fileName.endsWith(\".module.css\"))) {\n\t\t\t\tconst rootRule = postcss.rule({ selector: \":root\" });\n\n\t\t\t\troot.prepend(rootRule);\n\n\t\t\t\trootRule.append(\n\t\t\t\t\t`${pf}has-polyfil_gap-container: 0px;\n\t\t\t${pf}has-polyfil_gap-item: 0px;`\n\t\t\t\t);\n\n\t\t\t\trootRule.walk(i => { i.raws.before = \"\\n\\t\"; });\n\n\t\t\t}\n\n\t\t\troot.walkRules(rule => {\n\t\t\t\tvar gapValue = ['0px', '0px']\n\t\t\t\tvar marginValues = ['0px', '0px'];\n\t\t\t\tvar hasGap = false;\n\t\t\t\tvar hassFlex = false;\n\n\t\t\t\trule.walkDecls(function (decl) {\n\t\t\t\t\tif (decl.prop === \"width\" || decl.prop === \"height\") {\n\t\t\t\t\t\taddWidth(decl);\n\t\t\t\t\t}\n\t\t\t\t\tif (decl.prop === \"display\") {\n\t\t\t\t\t\thasFlex(decl);\n\t\t\t\t\t}\n\n\t\t\t\t\t// var regex = /(?:(\\w+)-)?(gap)/gi\n\t\t\t\t\t// /^gap|gap$/.test(decl.prop)\n\n\n\n\t\t\t\t\tif (decl.prop === \"gap\" || decl.prop === \"column-gap\" || decl.prop === \"row-gap\") {\n\t\t\t\t\t\thasGap = true;\n\t\t\t\t\t\tif (decl.prop === \"row-gap\") {\n\t\t\t\t\t\t\tgapValue[0] = decl.value\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (decl.prop === \"column-gap\") {\n\t\t\t\t\t\t\tgapValue[1] = decl.value\n\t\t\t\t\t\t}\n\n\n\n\t\t\t\t\t\tif (decl.prop === \"gap\") {\n\t\t\t\t\t\t\tgapValue = postcss.list.space(decl.value);\n\t\t\t\t\t\t\tif (gapValue.length === 1) {\n\t\t\t\t\t\t\t\tgapValue.push(gapValue[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (decl.prop === \"display\" && decl.value === \"flex\") {\n\t\t\t\t\t\thassFlex = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (decl.prop === \"display\" && decl.value === \"inline-flex\") {\n\t\t\t\t\t\thassFlex = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (decl.prop === \"margin\" || decl.prop === \"margin-left\" || decl.prop === \"margin-top\") {\n\t\t\t\t\t\tif (decl.prop === \"margin-top\") {\n\t\t\t\t\t\t\tmarginValues[0] = decl.value\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (decl.prop === \"margin-left\") {\n\t\t\t\t\t\t\tmarginValues[1] = decl.value\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (decl.prop === \"margin\") {\n\t\t\t\t\t\t\tmarginValues = postcss.list.space(decl.value);\n\t\t\t\t\t\t\tif (marginValues.length === 1) {\n\t\t\t\t\t\t\t\tmarginValues.push(marginValues[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (marginValues.length > 1) {\n\t\t\t\t\t\t\t\tmarginValues = marginValues.slice(0, 2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tif (hasGap && hassFlex) {\n\t\t\t\t\taddGap(rule, gapValue, marginValues, opts);\n\t\t\t\t\tremoveGap(rule);\n\t\t\t\t\t// removeMargin(rule);\n\n\t\t\t\t\t// supportNativeSolution(decl);\n\t\t\t\t}\n\t\t\t})\n\n\n\t\t}\n\t}\n}\n\nmodule.exports.postcss = true\n"],"names":["parse","require","pf","CS","SS","hasFlex","decl","container","parent","item","postcss","rule","selector","value","before","append","walk","i","raws","addGap","values","marginValues","opts","reset","slotted","properties","forEach","property","index","axis","side","number","nodes","unit","percentageRowGaps","webComponents","removeGap","walkDecls","prop","remove","addWidth","ifUnit","regex","test","module","exports","postcssPlugin","Once","root","fileName","source","input","file","endsWith","rootRule","prepend","walkRules","gapValue","hasGap","hassFlex","list","space","length","push","slice"],"mappings":"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"}